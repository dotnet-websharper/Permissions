(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.WebSharper={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return WebSharper.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:WebSharper.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},MarkResizable:function(n){return Object.defineProperty(n,"resizable",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},MarkReadOnly:function(n){return Object.defineProperty(n,"readonly",{enumerable:!1,writable:!1,configurable:!1,value:!0}),n},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.WebSharper.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9;b=a.WebSharper=a.WebSharper||{};c=b.Permissions=b.Permissions||{};d=c.Sample=c.Sample||{};e=d.Client=d.Client||{};f=b.Obj=b.Obj||{};g=b.UI=b.UI||{};h=g.Var$1=g.Var$1||{};i=g.Var=g.Var||{};j=b.Operators=b.Operators||{};k=a.EventTarget;l=g.Templating=g.Templating||{};m=l.Runtime=l.Runtime||{};n=m.Server=m.Server||{};o=n.TemplateInstance=n.TemplateInstance||{};p=b.Arrays=b.Arrays||{};q=n.ProviderBuilder=n.ProviderBuilder||{};r=n.Handler=n.Handler||{};s=b.Unchecked=b.Unchecked||{};t=a.WebSharper$Permissions$Sample_Templates=a.WebSharper$Permissions$Sample_Templates||{};u=b.JavaScript=b.JavaScript||{};v=u.Pervasives=u.Pervasives||{};w=a.WindowOrWorkerGlobalScope;x=u.JS=u.JS||{};y=g.ConcreteVar=g.ConcreteVar||{};z=g.Snap=g.Snap||{};A=g.TemplateHole=g.TemplateHole||{};B=g.TemplateHoleModule=g.TemplateHoleModule||{};C=B.TextView=B.TextView||{};D=a.System=a.System||{};E=D.Guid=D.Guid||{};F=B.EventQ=B.EventQ||{};G=b.Concurrency=b.Concurrency||{};H=u.Promise=u.Promise||{};I=g.Client=g.Client||{};J=I.Templates=I.Templates||{};K=g.Doc=g.Doc||{};L=g.Abbrev=g.Abbrev||{};M=L.Fresh=L.Fresh||{};N=b.Collections=b.Collections||{};O=N.Dictionary=N.Dictionary||{};P=a.Node;Q=a.Object;R=G.AsyncBody=G.AsyncBody||{};S=G.CT=G.CT||{};T=N.HashSet=N.HashSet||{};U=b.Seq=b.Seq||{};V=n.TemplateInitializer=n.TemplateInitializer||{};W=B.VarStr=B.VarStr||{};X=B.VarFloatUnchecked=B.VarFloatUnchecked||{};Y=B.VarBool=B.VarBool||{};Z=B.VarDateTime=B.VarDateTime||{};_0=B.VarFile=B.VarFile||{};_1=B.VarDomElement=B.VarDomElement||{};_2=g.View=g.View||{};_3=b.Numeric=b.Numeric||{};_4=G.Scheduler=G.Scheduler||{};_5=a.Error;_6=u.NonStandardPromiseRejectionException=u.NonStandardPromiseRejectionException||{};_7=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};_8=N.DictionaryUtil=N.DictionaryUtil||{};_9=b.Enumerator=b.Enumerator||{};_=_9.T=_9.T||{};$=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};ba=g.Docs=g.Docs||{};bb=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bc=g.DocElemNode=g.DocElemNode||{};bd=a.CharacterData;be=b.OperationCanceledException=b.OperationCanceledException||{};bf=b.CancellationTokenSource=b.CancellationTokenSource||{};bg=a.Blob;bh=g.Elt=g.Elt||{};bi=a.Element;bj=J.Prepare=J.Prepare||{};bk=b.Slice=b.Slice||{};bl=g.DomUtility=g.DomUtility||{};bm=N.KeyCollection=N.KeyCollection||{};bn=g.An=g.An||{};bo=I.Settings=I.Settings||{};bp=L.Mailbox=L.Mailbox||{};bq=I.Attrs=I.Attrs||{};br=bq.Dyn=bq.Dyn||{};bs=g.Attrs=g.Attrs||{};bt=B.Elt=B.Elt||{};bu=B.Text=B.Text||{};bv=B.Attribute=B.Attribute||{};bw=B.Event=B.Event||{};bx=g.AttrModule=g.AttrModule||{};by=g.AttrProxy=g.AttrProxy||{};bz=B.AfterRender=B.AfterRender||{};bA=B.AfterRenderQ=B.AfterRenderQ||{};bB=b.List=b.List||{};bC=bB.T=bB.T||{};bD=b.Strings=b.Strings||{};bE=g.Array=g.Array||{};bF=g.Updates=g.Updates||{};bG=N.ValueCollection=N.ValueCollection||{};bH=I.Docs=I.Docs||{};bI=bH.RunState=bH.RunState||{};bJ=bH.NodeSet=bH.NodeSet||{};bK=g.Anims=g.Anims||{};bL=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bM=N.HashSetUtil=N.HashSetUtil||{};bN=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bO=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bP=g.AppendList=g.AppendList||{};bQ=g.DynamicAttrNode=g.DynamicAttrNode||{};bR=b.KeyNotFoundException=b.KeyNotFoundException||{};bS=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bT=g.Easing=g.Easing||{};bU=L.HashSet=L.HashSet||{};bV=g.BindVar=g.BindVar||{};bW=g.String=g.String||{};bX=g.CheckedInput=g.CheckedInput||{};bY=bH.DomNodes=bH.DomNodes||{};bZ=b.Char=b.Char||{};b0=b.DateUtil=b.DateUtil||{};b1=b.Lazy=b.Lazy||{};b2=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};b3=b.Queue=b.Queue||{};b4=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};b5=b4.LazyRecord=b4.LazyRecord||{};b6=b&&b.Runtime;b7=a.console;b8=a.Math;b9=a.Date;e.Main=function(){var b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci;function cj(ck){return(b$.query({name:ck}).then(function(cl){return b_.Set(a.String(ck)+" permission: "+a.String(cl.state));}))["catch"](function(){return b_.Set("Permission "+a.String(ck)+" not supported");});}b_=h.Create$1("");b$=self.navigator.permissions;ca=(cb=(cc=b_.get_View(),(cd=(ce=(cf=(cg=new q.New$1(),(cg.h.push(r.EventQ2(cg.k,"checkgeolocationpermission",function(){return cg.i;},function(){var ck;G.Start((ck=null,G.Delay(function(){return G.Bind(H.AsAsync(cj("geolocation")),function(){return G.Return(null);});})),null);})),cg)),(cf.h.push(r.EventQ2(cf.k,"checkmicrophonepermission",function(){return cf.i;},function(){var ck;G.Start((ck=null,G.Delay(function(){return G.Bind(H.AsAsync(cj("microphone")),function(){return G.Return(null);});})),null);})),cf)),(ce.h.push(r.EventQ2(ce.k,"checknotificationpermission",function(){return ce.i;},function(){var ck;G.Start((ck=null,G.Delay(function(){return G.Bind(H.AsAsync(cj("notifications")),function(){return G.Return(null);});})),null);})),ce)),(cd.h.push(new C.New("status",cc)),cd))),(ch=r.CompleteHoles(cb.k,cb.h,[]),(ci=new o.New(ch[1],t.main(ch[0])),cb.i=ci,ci))).get_Doc();J.LoadLocalTemplates("");K.RunById("main",ca);};f=b.Obj=b6.Class({Equals:function(b_){return this===b_;},GetHashCode:function(){return -1;}},null,f);f.New=b6.Ctor(function(){},f);h=g.Var$1=b6.Class({},f,h);h.Create$1=function(b_){return new y.New(false,z.New({$:2,$0:b_,$1:[]}),b_);};i=g.Var=b6.Class({},f,i);i.New=b6.Ctor(function(){f.New.call(this);},i);j.FailWith=function(b_){throw new _5(b_);};j.KeyValue=function(b_){return[b_.K,b_.V];};j.range=function(b_,b$){var ca;ca=1+b$-b_;return ca<=0?[]:U.init(ca,function(cb){return cb+b_;});};o=n.TemplateInstance=b6.Class({get_Doc:function(){return this.doc;},SetAnchorRoot:function(b_){this.anchorRoot=b_;}},f,o);o.New=b6.Ctor(function(b_,b$){f.New.call(this);this.doc=b$;this.allVars=b_.$==0?b_.$0:j.FailWith("Should not happen");this.anchorRoot=null;},o);p.get=function(b_,b$){p.checkBounds(b_,b$);return b_[b$];};p.length=function(b_){return b_.dims===2?b_.length*b_.length:b_.length;};p.checkBounds=function(b_,b$){if(b$<0||b$>=b_.length)j.FailWith("Index was outside the bounds of the array.");};p.set=function(b_,b$,ca){p.checkBounds(b_,b$);b_[b$]=ca;};q=n.ProviderBuilder=b6.Class({},f,q);q.New$1=b6.Ctor(function(){var b_;f.New.call(this);this.i=null;this.k=(b_=E.NewGuid(),a.String(b_));this.h=b6.MarkResizable([]);b6.SetOptional(this,"s",null);},q);r.EventQ2=function(b_,b$,ca,cb){return new F.New(b$,function(cc){return function(cd){var ce;ce=ca();ce.SetAnchorRoot(cc);return cb({Vars:ce,Anchors:ce,Target:cc,Event:cd});};});};r.CompleteHoles=function(b_,b$,ca){var cc,cd,ce,cf,cg;function cb(ch,ci,cj){var ck;return cd.Contains(ch)?null:(ck=s.Equals(ci,0)?V.GetOrAddHoleFor(b_,ch,function(){return new W.New(ch,h.Create$1(""));}):s.Equals(ci,1)?V.GetOrAddHoleFor(b_,ch,function(){return new X.New(ch,h.Create$1(0));}):s.Equals(ci,2)?V.GetOrAddHoleFor(b_,ch,function(){return new Y.New(ch,h.Create$1(false));}):s.Equals(ci,3)?V.GetOrAddHoleFor(b_,ch,function(){return new Z.New(ch,h.Create$1(-8640000000000000));}):s.Equals(ci,4)?V.GetOrAddHoleFor(b_,ch,function(){return new _0.New(ch,h.Create$1([]));}):s.Equals(ci,5)?V.GetOrAddHoleFor(b_,ch,function(){var cl;cl=self.document.querySelector("[ws-dom="+ch+"]");cl.removeAttribute("ws-dom");return new _1.New(ch,h.Create$1({$:1,$0:cl}));}):j.FailWith("Invalid value type"),(cc.set_Item(ch,ck),{$:1,$0:ck}));}cc=new O.New$5();cd=new T.New$3();ce=_9.Get(b$);try{while(ce.MoveNext()){cf=ce.Current();cg=cf.get_Name();cd.SAdd(cg);cc.set_Item(cg,cf);}}finally{if(typeof ce=="object"&&"Dispose"in ce)ce.Dispose();}return[U.append(b$,p.choose(function(ch){return cb(ch[0],ch[1],ch[2]);},ca)),{$:0,$0:cc}];};s.Equals=function(b_,b$){var ca,cb,cc,cd;if(b_===b$)return true;else{ca=typeof b_;if(ca=="object"){if(b_===null||b_===void 0||b$===null||b$===void 0||!s.Equals(typeof b$,"object"))return false;else if("Equals"in b_)return b_.Equals(b$);else if("Equals"in b$)return false;else if(b_ instanceof a.Array&&b$ instanceof a.Array)return s.arrayEquals(b_,b$);else if(b_ instanceof a.Date&&b$ instanceof a.Date)return s.dateEquals(b_,b$);else{cb=[true];for(var ce in b_)if(function(cf){cb[0]=!b_.hasOwnProperty(cf)||b$.hasOwnProperty(cf)&&s.Equals(b_[cf],b$[cf]);return!cb[0];}(ce))break;if(cb[0]){for(var cf in b$)if(function(cg){cb[0]=!b$.hasOwnProperty(cg)||b_.hasOwnProperty(cg);return!cb[0];}(cf))break;}return cb[0];}}else return ca=="function"&&("$Func"in b_?b_.$Func===b$.$Func&&b_.$Target===b$.$Target:"$Invokes"in b_&&"$Invokes"in b$&&s.arrayEquals(b_.$Invokes,b$.$Invokes));}};s.arrayEquals=function(b_,b$){var ca,cb;if(p.length(b_)===p.length(b$)){ca=true;cb=0;while(ca&&cb<p.length(b_)){!s.Equals(p.get(b_,cb),p.get(b$,cb))?ca=false:void 0;cb=cb+1;}return ca;}else return false;};s.dateEquals=function(b_,b$){return b_.getTime()===b$.getTime();};s.Hash=function(b_){var b$;b$=typeof b_;return b$=="function"?0:b$=="boolean"?b_?1:0:b$=="number"?b_:b$=="string"?s.hashString(b_):b$=="object"?b_==null?0:b_ instanceof a.Array?s.hashArray(b_):s.hashObject(b_):0;};s.hashString=function(b_){var b$,ca,cb;if(b_===null)return 0;else{b$=5381;for(ca=0,cb=b_.length-1;ca<=cb;ca++)b$=s.hashMix(b$,b_[ca].charCodeAt());return b$;}};s.hashArray=function(b_){var b$,ca,cb;b$=-34948909;for(ca=0,cb=p.length(b_)-1;ca<=cb;ca++)b$=s.hashMix(b$,s.Hash(p.get(b_,ca)));return b$;};s.hashObject=function(b_){var b$,ca;if("GetHashCode"in b_)return b_.GetHashCode();else{b$=[0];for(var cb in b_)if(function(cc){b$[0]=s.hashMix(s.hashMix(b$[0],s.hashString(cc)),s.Hash(b_[cc]));return false;}(cb))break;return b$[0];}};s.hashMix=function(b_,b$){return(b_<<5)+b_+b$;};s.Compare=function(b_,b$){var ca,cb,cc,cd,ce,cf;if(b_===b$)return 0;else{cb=typeof b_;switch(cb=="function"?1:cb=="boolean"?2:cb=="number"?2:cb=="string"?2:cb=="object"?3:0){case 0:return typeof b$=="undefined"?0:-1;case 1:return j.FailWith("Cannot compare function values.");case 2:return b_<b$?-1:1;case 3:if(b_===null)cc=-1;else if(b$===null)cc=1;else if("CompareTo"in b_)cc=b_.CompareTo(b$);else if("CompareTo0"in b_)cc=b_.CompareTo0(b$);else if(b_ instanceof a.Array&&b$ instanceof a.Array)cc=s.compareArrays(b_,b$);else if(b_ instanceof a.Date&&b$ instanceof a.Date)cc=s.compareDates(b_,b$);else{cd=[0];for(var cg in b_)if(function(ch){return!b_.hasOwnProperty(ch)?false:!b$.hasOwnProperty(ch)?(cd[0]=1,true):(cd[0]=s.Compare(b_[ch],b$[ch]),cd[0]!==0);}(cg))break;if(cd[0]===0){for(var ch in b$)if(function(ci){return!b$.hasOwnProperty(ci)?false:!b_.hasOwnProperty(ci)&&(cd[0]=-1,true);}(ch))break;}cc=cd[0];}return cc;}}};s.compareArrays=function(b_,b$){var ca,cb;if(p.length(b_)<p.length(b$))return -1;else if(p.length(b_)>p.length(b$))return 1;else{ca=0;cb=0;while(ca===0&&cb<p.length(b_)){ca=s.Compare(p.get(b_,cb),p.get(b$,cb));cb=cb+1;}return ca;}};s.compareDates=function(b_,b$){return s.Compare(b_.getTime(),b$.getTime());};t.main=function(b_){J.LoadLocalTemplates("index");return b_?J.NamedTemplate("index",{$:1,$0:"main"},b_):void 0;};v.NewFromSeq=function(b_){var b$,ca,cb;b$={};ca=_9.Get(b_);try{while(ca.MoveNext()){cb=ca.Current();b$[cb[0]]=cb[1];}}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}return b$;};x.GetFieldValues=function(b_){var b$,ca;b$=[];for(var cb in b_)b$.push(b_[cb]);return b$;};y=g.ConcreteVar=b6.Class({get_View:function(){return this.view;},Set:function(b_){if(this.isConst)(function(b$){return b$("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b$){b7.log(b$);}));else{z.Obsolete(this.snap);this.current=b_;this.snap=z.New({$:2,$0:b_,$1:[]});}},SetFinal:function(b_){if(this.isConst)(function(b$){return b$("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(b$){b7.log(b$);}));else{z.Obsolete(this.snap);this.isConst=true;this.current=b_;this.snap=z.New({$:0,$0:b_});}},Get:function(){return this.current;},UpdateMaybe:function(b_){var b$;b$=b_(this.Get());if(b$!=null&&b$.$==1)this.Set(b$.$0);}},i,y);y.New=b6.Ctor(function(b_,b$,ca){var cb;cb=this;i.New.call(this);this.isConst=b_;this.current=ca;this.snap=b$;this.view=function(){return cb.snap;};this.id=M.Int();},y);z.WhenRun=function(b_,b$,ca){var cb;cb=b_.s;if(cb==null)ca();else cb!=null&&cb.$==2?(cb.$1.push(ca),b$(cb.$0)):cb!=null&&cb.$==3?(cb.$0.push(b$),cb.$1.push(ca)):b$(cb.$0);};z.Map=function(b_,b$){var ca,cb;ca=b$.s;return ca!=null&&ca.$==0?z.New({$:0,$0:b_(ca.$0)}):(cb=z.New({$:3,$0:[],$1:[]}),(z.When(b$,function(cc){z.MarkDone(cb,b$,b_(cc));},cb),cb));};z.Map3=function(b_,b$,ca,cb){var cc,cd,ce,cf;function cg(ch){var ci,cj,ck,cl;if(!(ci=cf.s,ci!=null&&ci.$==0||ci!=null&&ci.$==2)){cj=z.ValueAndForever(b$);ck=z.ValueAndForever(ca);cl=z.ValueAndForever(cb);if(cj!=null&&cj.$==1)ck!=null&&ck.$==1?cl!=null&&cl.$==1?cj.$0[1]&&ck.$0[1]&&cl.$0[1]?z.MarkForever(cf,b_(cj.$0[0],ck.$0[0],cl.$0[0])):z.MarkReady(cf,b_(cj.$0[0],ck.$0[0],cl.$0[0])):void 0:void 0;}}cc=b$.s;cd=ca.s;ce=cb.s;return cc!=null&&cc.$==0?cd!=null&&cd.$==0?ce!=null&&ce.$==0?z.New({$:0,$0:b_(cc.$0,cd.$0,ce.$0)}):z.Map3Opt1(b_,cc.$0,cd.$0,cb):ce!=null&&ce.$==0?z.Map3Opt2(b_,cc.$0,ce.$0,ca):z.Map3Opt3(b_,cc.$0,ca,cb):cd!=null&&cd.$==0?ce!=null&&ce.$==0?z.Map3Opt4(b_,cd.$0,ce.$0,b$):z.Map3Opt5(b_,cd.$0,b$,cb):ce!=null&&ce.$==0?z.Map3Opt6(b_,ce.$0,b$,ca):(cf=z.New({$:3,$0:[],$1:[]}),(z.When(b$,cg,cf),z.When(ca,cg,cf),z.When(cb,cg,cf),cf));};z.Sequence=function(b_){var b$,ca,cb;function cc(cd){var ce;if(cb[0]===0){ce=p.map(function(cf){var cg;cg=cf.s;return cg!=null&&cg.$==0?cg.$0:cg!=null&&cg.$==2?cg.$0:j.FailWith("value not found by View.Sequence");},b$);if(p.forall(function(cf){var cg;cg=cf.s;return cg!=null&&cg.$==0;},b$))z.MarkForever(ca,ce);else z.MarkReady(ca,ce);}else cb[0]=cb[0]-1;}b$=p.ofSeq(b_);return b$.length==0?z.New({$:0,$0:[]}):(ca=z.New({$:3,$0:[],$1:[]}),(cb=[p.length(b$)-1],(p.iter(function(cd){z.When(cd,cc,ca);},b$),ca)));};z.Map2=function(b_,b$,ca){var cb,cc,cd;function ce(cf){var cg,ch,ci;if(!(cg=cd.s,cg!=null&&cg.$==0||cg!=null&&cg.$==2)){ch=z.ValueAndForever(b$);ci=z.ValueAndForever(ca);if(ch!=null&&ch.$==1)ci!=null&&ci.$==1?ch.$0[1]&&ci.$0[1]?z.MarkForever(cd,b_(ch.$0[0],ci.$0[0])):z.MarkReady(cd,b_(ch.$0[0],ci.$0[0])):void 0;}}cb=b$.s;cc=ca.s;return cb!=null&&cb.$==0?cc!=null&&cc.$==0?z.New({$:0,$0:b_(cb.$0,cc.$0)}):z.Map2Opt1(b_,cb.$0,ca):cc!=null&&cc.$==0?z.Map2Opt2(b_,cc.$0,b$):(cd=z.New({$:3,$0:[],$1:[]}),(z.When(b$,ce,cd),z.When(ca,ce,cd),cd));};z.Map2Unit=function(b_,b$){var ca,cb,cc;function cd(){var ce,cf,cg;if(!(ce=cc.s,ce!=null&&ce.$==0||ce!=null&&ce.$==2)){cf=z.ValueAndForever(b_);cg=z.ValueAndForever(b$);if(cf!=null&&cf.$==1)cg!=null&&cg.$==1?cf.$0[1]&&cg.$0[1]?z.MarkForever(cc,null):z.MarkReady(cc,null):void 0;}}ca=b_.s;cb=b$.s;return ca!=null&&ca.$==0?cb!=null&&cb.$==0?z.New({$:0,$0:null}):b$:cb!=null&&cb.$==0?b_:(cc=z.New({$:3,$0:[],$1:[]}),(z.When(b_,cd,cc),z.When(b$,cd,cc),cc));};z.Copy=function(b_){var b$,ca,cb;b$=b_.s;return b$==null?b_:b$!=null&&b$.$==2?(ca=z.New({$:2,$0:b$.$0,$1:[]}),(z.WhenObsolete(b_,ca),ca)):b$!=null&&b$.$==3?(cb=z.New({$:3,$0:[],$1:[]}),(z.When(b_,function(cc){z.MarkDone(cb,b_,cc);},cb),cb)):b_;};z.WhenObsoleteRun=function(b_,b$){var ca;ca=b_.s;if(ca==null)b$();else ca!=null&&ca.$==2?ca.$1.push(b$):ca!=null&&ca.$==3?ca.$1.push(b$):void 0;};z.When=function(b_,b$,ca){var cb;cb=b_.s;if(cb==null)z.Obsolete(ca);else cb!=null&&cb.$==2?(z.EnqueueSafe(cb.$1,ca),b$(cb.$0)):cb!=null&&cb.$==3?(cb.$0.push(b$),z.EnqueueSafe(cb.$1,ca)):b$(cb.$0);};z.MarkDone=function(b_,b$,ca){var cb;if(cb=b$.s,cb!=null&&cb.$==0)z.MarkForever(b_,ca);else z.MarkReady(b_,ca);};z.Map3Opt1=function(b_,b$,ca,cb){return z.Map(function(cc){return b_(b$,ca,cc);},cb);};z.Map3Opt2=function(b_,b$,ca,cb){return z.Map(function(cc){return b_(b$,cc,ca);},cb);};z.Map3Opt3=function(b_,b$,ca,cb){return z.Map2(function(cc,cd){return b_(b$,cc,cd);},ca,cb);};z.Map3Opt4=function(b_,b$,ca,cb){return z.Map(function(cc){return b_(cc,b$,ca);},cb);};z.Map3Opt5=function(b_,b$,ca,cb){return z.Map2(function(cc,cd){return b_(cc,b$,cd);},ca,cb);};z.Map3Opt6=function(b_,b$,ca,cb){return z.Map2(function(cc,cd){return b_(cc,cd,b$);},ca,cb);};z.ValueAndForever=function(b_){var b$;b$=b_.s;return b$!=null&&b$.$==0?{$:1,$0:[b$.$0,true]}:b$!=null&&b$.$==2?{$:1,$0:[b$.$0,false]}:null;};z.MarkForever=function(b_,b$){var ca,cb,cc,cd;ca=b_.s;if(ca!=null&&ca.$==3){b_.s={$:0,$0:b$};cb=ca.$0;for(cc=0,cd=p.length(cb)-1;cc<=cd;cc++)(p.get(cb,cc))(b$);}else void 0;};z.MarkReady=function(b_,b$){var ca,cb,cc,cd;ca=b_.s;if(ca!=null&&ca.$==3){b_.s={$:2,$0:b$,$1:ca.$1};cb=ca.$0;for(cc=0,cd=p.length(cb)-1;cc<=cd;cc++)(p.get(cb,cc))(b$);}else void 0;};z.Map2Opt1=function(b_,b$,ca){return z.Map(function(cb){return b_(b$,cb);},ca);};z.Map2Opt2=function(b_,b$,ca){return z.Map(function(cb){return b_(cb,b$);},ca);};z.WhenObsolete=function(b_,b$){var ca;ca=b_.s;if(ca==null)z.Obsolete(b$);else ca!=null&&ca.$==2?z.EnqueueSafe(ca.$1,b$):ca!=null&&ca.$==3?z.EnqueueSafe(ca.$1,b$):void 0;};z.EnqueueSafe=function(b_,b$){var ca,cb,cc,cd;b_.push(b$);if(b_.length%20===0){ca=b_.slice(0);b3.Clear(b_);for(cb=0,cc=p.length(ca)-1;cb<=cc;cb++){cd=p.get(ca,cb);if(typeof cd=="object")(function(ce){if(ce.s)b_.push(ce);}(cd));else(function(ce){b_.push(ce);}(cd));}}else void 0;};A=g.TemplateHole=b6.Class({ForTextView:function(){b7.warn("Content hole filled with attribute data",this.get_Name());return null;},AddAttribute:function(b_,b$){b7.warn("Var hole filled with non-Var data",this.get_Name());},get_AsChoiceView:function(){b7.warn("Attribute value hole filled with non-text data",this.get_Name());return{$:0,$0:""};}},f,A);A.New=b6.Ctor(function(){f.New.call(this);},A);C=B.TextView=b6.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith};},get_AsChoiceView:function(){return{$:1,$0:this.fillWith};}},A,C);C.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},C);E.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(b_){var b$,ca;b$=b8.random()*16|0;ca=b_=="x"?b$:b$&3|8;return ca.toString(16);});};F=B.EventQ=b6.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},A,F);F.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},F);G.Delay=function(b_){return function(b$){try{(b_(null))(b$);}catch(ca){b$.k({$:1,$0:ca});}};};G.Bind=function(b_,b$){return G.checkCancel(function(ca){b_(R.New(function(cb){var cc;if(cb.$==0){cc=cb.$0;G.scheduler().Fork(function(){try{(b$(cc))(ca);}catch(cd){ca.k({$:1,$0:cd});}});}else G.scheduler().Fork(function(){ca.k(cb);});},ca.ct));});};G.Return=function(b_){return function(b$){b$.k({$:0,$0:b_});};};G.Start=function(b_,b$){var ca,cb;ca=(cb=(G.defCTS())[0],b$==null?cb:b$.$0);G.scheduler().Fork(function(){if(!ca.c)b_(R.New(function(cc){if(cc.$==1)G.UncaughtAsyncError(cc.$0);},ca));});};G.checkCancel=function(b_){return function(b$){if(b$.ct.c)G.cancel(b$);else b_(b$);};};G.defCTS=function(){_7.$cctor();return _7.defCTS;};G.UncaughtAsyncError=function(b_){b7.log("WebSharper: Uncaught asynchronous exception",b_);};G.cancel=function(b_){b_.k({$:2,$0:new be.New(b_.ct)});};G.scheduler=function(){_7.$cctor();return _7.scheduler;};G.FromContinuations=function(b_){return function(b$){var ca;function cb(cc){if(ca[0])j.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{ca[0]=true;G.scheduler().Fork(cc);}}ca=[false];b_(function(cc){cb(function(){b$.k({$:0,$0:cc});});},function(cc){cb(function(){b$.k({$:1,$0:cc});});},function(cc){cb(function(){b$.k({$:2,$0:cc});});});};};G.Zero=function(){_7.$cctor();return _7.Zero;};H.AsAsync=function(b_){return G.FromContinuations(function(b$,ca){b_.then(b$,function(cb){return ca(H.unwrapExn(cb));});});};H.unwrapExn=function(b_){return b_ instanceof _5?b_:new _6.New(b_);};J.LoadLocalTemplates=function(b_){!J.LocalTemplatesLoaded()?(J.set_LocalTemplatesLoaded(true),J.LoadNestedTemplates(self.document.body,"")):void 0;J.LoadedTemplates().set_Item(b_,J.LoadedTemplateFile(""));};J.NamedTemplate=function(b_,b$,ca){var cb,cc;cb=(cc=null,[J.LoadedTemplateFile(b_).TryGetValue(b$==null?"":b$.$0,{get:function(){return cc;},set:function(cd){cc=cd;}}),cc]);return cb[0]?J.ChildrenTemplate(cb[1].cloneNode(true),ca):(b7.warn("Local template doesn't exist",b$),K.get_Empty());};J.LocalTemplatesLoaded=function(){$.$cctor();return $.LocalTemplatesLoaded;};J.set_LocalTemplatesLoaded=function(b_){$.$cctor();$.LocalTemplatesLoaded=b_;};J.LoadNestedTemplates=function(b_,b$){var cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv;function ca(cw){var cx,cy;if(!cb.ContainsKey(cw)){cx=(cy=null,[cc.TryGetValue(cw,{get:function(){return cy;},set:function(cz){cy=cz;}}),cy]);if(cx[0]){cv.SAdd(cw);cc.RemoveKey(cw);J.PrepareTemplateStrict(b$,{$:1,$0:cw},cx[1],{$:1,$0:ca});}else b7.warn(cv.Contains(cw)?"Encountered loop when instantiating "+cw:"Local template does not exist: "+cw);}}cb=J.LoadedTemplateFile(b$);cc=new O.New$5();cd=b_.querySelectorAll("[ws-template]");for(ce=0,cf=cd.length-1;ce<=cf;ce++){cg=cd[ce];ch=cg.getAttribute("ws-template").toLowerCase();cg.removeAttribute("ws-template");cc.set_Item(ch,J.FakeRootSingle(cg));}ci=b_.querySelectorAll("[ws-children-template]");for(cj=0,ck=ci.length-1;cj<=ck;cj++){cl=ci[cj];cm=cl.getAttribute("ws-children-template").toLowerCase();cl.removeAttribute("ws-children-template");cc.set_Item(cm,J.FakeRoot(cl));}cn=b_.querySelectorAll("template[id]");for(co=0,cp=cn.length-1;co<=cp;co++){cq=cn[co];cc.set_Item(cq.getAttribute("id").toLowerCase(),J.FakeRootFromHTMLTemplate(cq));}cr=b_.querySelectorAll("template[name]");for(cs=0,ct=cr.length-1;cs<=ct;cs++){cu=cr[cs];cc.set_Item(cu.getAttribute("name").toLowerCase(),J.FakeRootFromHTMLTemplate(cu));}cv=new T.New$3();while(cc.count>0)ca(U.head(cc.Keys()));};J.LoadedTemplates=function(){$.$cctor();return $.LoadedTemplates;};J.LoadedTemplateFile=function(b_){var b$,ca,cb;b$=(ca=null,[J.LoadedTemplates().TryGetValue(b_,{get:function(){return ca;},set:function(cc){ca=cc;}}),ca]);return b$[0]?b$[1]:(cb=new O.New$5(),(J.LoadedTemplates().set_Item(b_,cb),cb));};J.ChildrenTemplate=function(b_,b$){var ca,cb,cc,cd,ce;ca=J.InlineTemplate(b_,U.append(b$,J.GlobalHoles().Values()));cb=ca[1];cc=ca[0];cd=cc.Els;return!s.Equals(cd,null)&&cd.length===1&&(p.get(cd,0)instanceof P&&(s.Equals(p.get(cd,0).nodeType,P.ELEMENT_NODE)&&(ce=p.get(cd,0),true)))?bh.TreeNode(cc,cb):K.Mk({$:6,$0:cc},cb);};J.FakeRootSingle=function(b_){var b$,ca,cb,cc;b_.removeAttribute("ws-template");b$=b_.getAttribute("ws-replace");if(b$==null);else{b_.removeAttribute("ws-replace");ca=b_.parentNode;s.Equals(ca,null)?void 0:(cb=self.document.createElement(b_.tagName),cb.setAttribute("ws-replace",b$),ca.replaceChild(cb,b_));}cc=self.document.createElement("div");cc.appendChild(b_);return cc;};J.FakeRoot=function(b_){var b$;b$=self.document.createElement("div");while(b_.hasChildNodes())b$.appendChild(b_.firstChild);return b$;};J.FakeRootFromHTMLTemplate=function(b_){var b$,ca,cb,cc;b$=self.document.createElement("div");ca=b_.content;for(cb=0,cc=ca.childNodes.length-1;cb<=cc;cb++)b$.appendChild(ca.childNodes[cb].cloneNode(true));return b$;};J.PrepareTemplateStrict=function(b_,b$,ca,cb){var cc,cd;function ce(ck,cl){var cm,cn,co,cp,cq,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM;function cr(cN){}while(true)switch(ck){case 0:if(cl!==null){cm=cl.nextSibling;if(s.Equals(cl.nodeType,P.TEXT_NODE))bj.convertTextNode(cl);else if(s.Equals(cl.nodeType,P.ELEMENT_NODE))cg(cl);cl=cm;}else return null;break;case 1:cs=bk.string(cl.nodeName,{$:1,$0:3},null).toLowerCase();ct=(cn=cs.indexOf("."),cn===-1?[b_,cs]:[bk.string(cs,null,{$:1,$0:cn-1}),bk.string(cs,{$:1,$0:cn+1},null)]);cu=ct[1];cv=ct[0];if(cv!=""&&!J.LoadedTemplates().ContainsKey(cv))return bj.failNotLoaded(cu);else{if(cv==""&&cb!=null)cb.$0(cu);cw=J.LoadedTemplates().Item(cv);if(!cw.ContainsKey(cu))return bj.failNotLoaded(cu);else{cx=cw.Item(cu);cy=cx.cloneNode(true);cz=new T.New$3();cA=new O.New$5();cB=cl.attributes;for(cC=0,cD=cB.length-1;cC<=cD;cC++){cE=cB.item(cC).name.toLowerCase();cA.set_Item(cE,(cF=cB.item(cC).nodeValue,cF==""?cE:cF.toLowerCase()));if(!cz.SAdd(cE))b7.warn("Hole mapped twice",cE);}for(cG=0,cH=cl.childNodes.length-1;cG<=cH;cG++){cI=cl.childNodes[cG];if(s.Equals(cI.nodeType,P.ELEMENT_NODE))!cz.SAdd(cI.nodeName.toLowerCase())?b7.warn("Hole filled twice",cu):void 0;}cJ=cl.childNodes.length===1&&s.Equals(cl.firstChild.nodeType,P.TEXT_NODE);if(cJ){cp=bj.fillTextHole(cy,cl.firstChild.textContent,cu);((function(cN){return function(cO){if(cO!=null)cN(cO.$0);};}((cq=function(cN){return function(cO){return cN.SAdd(cO);};}(cz),function(cN){return cr(cq(cN));})))(cp));}bj.removeHolesExcept(cy,cz);if(!cJ){for(cK=0,cL=cl.childNodes.length-1;cK<=cL;cK++){cM=cl.childNodes[cK];if(s.Equals(cM.nodeType,P.ELEMENT_NODE))cM.hasAttributes()?bj.fillInstanceAttrs(cy,cM):cf(cy,cM);}}bj.mapHoles(cy,cA);bj.fill(cy,cl.parentNode,cl);cl.parentNode.removeChild(cl);return;}}break;}}function cf(ck,cl){var cm,cn,cp,cq;function co(cr,cs){var ct;if(cp=="title"&&cl.hasChildNodes()){ct=bl.ParseHTMLIntoFakeRoot(cl.textContent);cl.removeChild(cl.firstChild);while(ct.hasChildNodes())cl.appendChild(ct.firstChild);}else null;cg(cl);return bj.fill(cl,cr,cs);}cp=cl.nodeName.toLowerCase();J.foreachNotPreserved(ck,"[ws-attr-holes]",function(cr){var cs,ct,cu,cv,cw;cs=bD.SplitChars(cr.getAttribute("ws-attr-holes"),[" "],1);for(ct=0,cu=cs.length-1;ct<=cu;ct++){cv=p.get(cs,ct);cr.setAttribute(cv,(cw=new a.RegExp("\\${"+cp+"}","ig"),cr.getAttribute(cv).replace(cw,cl.textContent)));}});cq=ck.querySelector("[ws-hole="+cp+"]");if(s.Equals(cq,null)){cm=ck.querySelector("[ws-replace="+cp+"]");return s.Equals(cm,null)?(cn=ck.querySelector("slot[name="+cp+"]"),ck.tagName.toLowerCase()=="template"?(co(cn.parentNode,cn),void cn.parentNode.removeChild(cn)):null):(co(cm.parentNode,cm),void cm.parentNode.removeChild(cm));}else{while(cq.hasChildNodes())cq.removeChild(cq.lastChild);cq.removeAttribute("ws-hole");return co(cq,null);}}function cg(ck){if(!ck.hasAttribute("ws-preserve"))if(bD.StartsWith(ck.nodeName.toLowerCase(),"ws-"))ci(ck);else{bj.convertAttrs(ck);ch(ck.firstChild);}}function ch(ck){return ce(0,ck);}function ci(ck){return ce(1,ck);}function cj(ck){var cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw;while(true){cl=ck.querySelector("[ws-template]");if(s.Equals(cl,null)){cm=ck.querySelector("[ws-children-template]");if(s.Equals(cm,null)){cn=ck.querySelectorAll("template[id]");for(co=1,cp=cn.length-1;co<=cp;co++){cq=cn[co];if(cc.Contains(cq));else{J.PrepareTemplateStrict(b_,{$:1,$0:cq.getAttribute("id")},cq,null);cc.SAdd(cq);}}cr=ck.querySelectorAll("template[name]");for(cs=1,ct=cr.length-1;cs<=ct;cs++){cu=cr[cs];if(cc.Contains(cu));else{J.PrepareTemplateStrict(b_,{$:1,$0:cu.getAttribute("name")},cu,null);cc.SAdd(cu);}}return null;}else{cv=cm.getAttribute("ws-children-template");cm.removeAttribute("ws-children-template");J.PrepareTemplateStrict(b_,{$:1,$0:cv},cm,null);ck=ck;}}else{cw=cl.getAttribute("ws-template");(J.PrepareSingleTemplate(b_,{$:1,$0:cw},cl))(null);ck=ck;}}}cc=new T.New$3();cd=(b$==null?"":b$.$0).toLowerCase();J.LoadedTemplateFile(b_).set_Item(cd,ca);if(ca.hasChildNodes()){cj(ca);ch(ca.firstChild);}};J.InlineTemplate=function(b_,b$){var ca,cb,cc,cd,ce,ci,cj,ck,cl,cm,cn,co;function cf(cp,cq){var cr,cs,ct;cr=bs.Insert(cp,cq);cj.push(bs.Updates(cr));ck.push([cp,cr]);cs=b6.GetOptional(cr.OnAfterRender);return cs==null?null:(ct=cs.$0,void cl.push(function(){ct(cp);}));}function cg(cp){var cq,cr,cs,ct;cq=(cr=null,[cm.TryGetValue(cp,{get:function(){return cr;},set:function(cu){cr=cu;}}),cr]);return cq[0]?(cs=cq[1],cs instanceof bt?{$:1,$0:cs.get_Value()}:cs instanceof bu?{$:1,$0:K.TextNode(cs.get_Value())}:(ct=cs.ForTextView(),ct==null?null:{$:1,$0:K.TextView(ct.$0)})):null;}function ch(){J.foreachNotPreservedwsDOM("[ws-dom]",function(cp){var cq,cr,cs,ct,cu,cv,cw;cq=(cr=null,[cm.TryGetValue(cp.getAttribute("ws-dom").toLowerCase(),{get:function(){return cr;},set:function(cx){cr=cx;}}),cr]);if(cq[0]){cs=cq[1];cs instanceof _1?(ct=cs.get_Value(),cp.removeAttribute("ws-dom"),cu=cp,cv=new a.MutationObserver(function(cx,cy){p.iter(function(cz){function cA(cB,cC,cD,cE){if(cB===cu&&cz.addedNodes.length!==1){ct.SetFinal(null);cy.disconnect();}}cz.removedNodes.forEach(b6.CreateFuncWithArgs(function(cB){return cA(cB[0],cB[1],cB[2],cB[3]);}),null);},cx);}),cp.parentElement!==null?cv.observe(cp.parentElement,(cw={},cw.childList=true,cw)):void 0,ct.Set({$:1,$0:cp}),_2.Sink(function(cx){var cy;if(cx!=null&&cx.$==1){cy=cx.$0;if(cu===cy);else{cu.replaceWith.apply(cu,[cy]);cu=cy;}}else{cu.remove();cv.disconnect();}},ct.get_View())):void 0;}});}ci=[];cj=[];ck=[];cl=[];cm=new O.New$5();cn=_9.Get(b$);try{while(cn.MoveNext()){co=cn.Current();cm.set_Item(co.get_Name(),co);}}finally{if(typeof cn=="object"&&"Dispose"in cn)cn.Dispose();}ca=bl.ChildrenArray(b_);J.foreachNotPreserved(b_,"[ws-hole]",function(cp){var cq,cr,cs;cs=cp.getAttribute("ws-hole");cp.removeAttribute("ws-hole");while(cp.hasChildNodes())cp.removeChild(cp.lastChild);cq=cg(cs);if(cq!=null&&cq.$==1){cr=cq.$0;ba.LinkElement(cp,cr.docNode);ci.push(bc.New(bs.Empty(cp),cr.docNode,null,cp,M.Int(),null));cj.push(cr.updates);}});J.foreachNotPreserved(b_,"[ws-replace]",function(cp){var cq,cr,cs,ct,cu,cv;cq=cg(cp.getAttribute("ws-replace"));if(cq!=null&&cq.$==1){cr=cq.$0;cs=cp.parentNode;ct=self.document.createTextNode("");cs.replaceChild(ct,cp);cu=ba.InsertBeforeDelim(ct,cr.docNode);cv=p.tryFindIndex(function(cw){return cp===cw;},ca);cv==null?void 0:p.set(ca,cv.$0,cr.docNode);ci.push(bc.New(bs.Empty(cs),cr.docNode,{$:1,$0:[cu,ct]},cs,M.Int(),null));cj.push(cr.updates);}});cb=false;J.foreachNotPreserved(b_,"slot",function(cp){var cq,cr,cs,ct;cs=cp.getAttribute("name");ct=cs==""||cs==null?"default":cs.toLowerCase();if(cb&&ct=="default"||!s.Equals(b_.parentElement,null))void 0;else{while(cp.hasChildNodes())cp.removeChild(cp.lastChild);if(ct=="default")cb=true;cq=cg(ct);if(cq!=null&&cq.$==1){cr=cq.$0;ba.LinkElement(cp,cr.docNode);ci.push(bc.New(bs.Empty(cp),cr.docNode,null,cp,M.Int(),null));cj.push(cr.updates);}}});J.foreachNotPreserved(b_,"[ws-attr]",function(cp){var cq,cr,cs,ct;cq=cp.getAttribute("ws-attr");cp.removeAttribute("ws-attr");cr=(cs=null,[cm.TryGetValue(cq,{get:function(){return cs;},set:function(cu){cs=cu;}}),cs]);if(cr[0]){ct=cr[1];ct instanceof bv?cf(cp,ct.get_Value()):b7.warn("Attribute hole filled with non-attribute data",cq);}});J.foreachNotPreserved(b_,"[ws-on]",function(cp){cf(cp,by.Concat(p.choose(function(cq){var cr,cs,ct,cu;cr=bD.SplitChars(cq,[":"],1);cs=(ct=null,[cm.TryGetValue(p.get(cr,1),{get:function(){return ct;},set:function(cv){ct=cv;}}),ct]);return cs[0]?(cu=cs[1],cu instanceof bw?{$:1,$0:bx.Handler(p.get(cr,0),cu.get_Value())}:cu instanceof F?{$:1,$0:by.Handler(p.get(cr,0),cu.get_Value())}:(b7.warn("Event hole on"+p.get(cr,0)+" filled with non-event data",p.get(cr,1)),null)):null;},bD.SplitChars(cp.getAttribute("ws-on"),[" "],1))));cp.removeAttribute("ws-on");});J.foreachNotPreserved(b_,"[ws-onafterrender]",function(cp){var cq,cr,cs,ct;cq=cp.getAttribute("ws-onafterrender");cr=(cs=null,[cm.TryGetValue(cq,{get:function(){return cs;},set:function(cu){cs=cu;}}),cs]);if(cr[0]){ct=cr[1];ct instanceof bz?(cp.removeAttribute("ws-onafterrender"),cf(cp,bx.OnAfterRender(ct.get_Value()))):ct instanceof bA?(cp.removeAttribute("ws-onafterrender"),cf(cp,bx.OnAfterRender(ct.get_Value()))):b7.warn("onafterrender hole filled with non-onafterrender data",cq);}});J.foreachNotPreserved(b_,"[ws-var]",function(cp){var cq,cr,cs;cq=cp.getAttribute("ws-var");cp.removeAttribute("ws-var");cr=(cs=null,[cm.TryGetValue(cq,{get:function(){return cs;},set:function(ct){cs=ct;}}),cs]);if(cr[0])cr[1].AddAttribute(function(ct){return function(cu){return cf(ct,cu);};},cp);});J.foreachNotPreserved(b_,"[ws-attr-holes]",function(cp){var cq,cr,cs,ct;cq=new a.RegExp(J.TextHoleRE(),"g");cr=bD.SplitChars(cp.getAttribute("ws-attr-holes"),[" "],1);cp.removeAttribute("ws-attr-holes");for(cs=0,ct=cr.length-1;cs<=ct;cs++)(function(){var cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG;cD=p.get(cr,cs);cE=cp.getAttribute(cD);cu=null;cv=0;cF=[];while(cu=cq.exec(cE),cu!==null){cG=bk.string(cE,{$:1,$0:cv},{$:1,$0:cq.lastIndex-p.get(cu,0).length-1});cv=cq.lastIndex;cF.push([cG,p.get(cu,1)]);}cx=bk.string(cE,{$:1,$0:cv},null);cq.lastIndex=0;cy=p.foldBack(function(cH,cI){return(function(cJ){var cK,cL;cK=cJ[0];cL=cJ[1];return function(cM){var cN,cO,cP,cQ,cR;cN=cM[0];cO=cM[1];cP=(cQ=(cR=null,[cm.TryGetValue(cL,{get:function(){return cR;},set:function(cS){cR=cS;}}),cR]),cQ[0]?cQ[1].get_AsChoiceView():{$:0,$0:""});return cP.$==1?[cK,new bC({$:1,$0:cN==""?cP.$0:_2.Map(function(cS){return cS+cN;},cP.$0),$1:cO})]:[cK+cP.$0+cN,cO];};}(cH))(cI);},cF,[cx,bC.Empty]);return cf(cp,cy[1].$==1?cy[1].$1.$==1?cy[1].$1.$1.$==1?cy[1].$1.$1.$1.$==0?(cz=cy[0],bx.Dynamic(cD,_2.Map3(function(cH,cI,cJ){return cz+cH+cI+cJ;},cy[1].$0,cy[1].$1.$0,cy[1].$1.$1.$0))):(cA=cy[0],bx.Dynamic(cD,_2.Map(function(cH){return cA+bD.concat("",cH);},_2.Sequence(cy[1])))):(cB=cy[0],bx.Dynamic(cD,_2.Map2(function(cH,cI){return cB+cH+cI;},cy[1].$0,cy[1].$1.$0))):cy[0]==""?bx.Dynamic(cD,cy[1].$0):(cC=cy[0],bx.Dynamic(cD,_2.Map(function(cH){return cC+cH;},cy[1].$0))):by.Create(cD,cy[0]));}());});return[b6.DeleteEmptyFields({Els:ca,Dirty:true,Holes:ci,Attrs:ck,Render:(cc=cl.length==0?{$:1,$0:function(){ch();}}:{$:1,$0:function(cp){ch();p.iter(function(cq){cq(cp);},cl);}},cc?cc.$0:void 0),El:(cd=!s.Equals(ca,null)&&ca.length===1&&(p.get(ca,0)instanceof P&&(p.get(ca,0)instanceof bi&&(ce=p.get(ca,0),true)))?{$:1,$0:ce}:null,cd?cd.$0:void 0)},["Render","El"]),bE.TreeReduce(_2.Const(),_2.Map2Unit,cj)];};J.GlobalHoles=function(){$.$cctor();return $.GlobalHoles;};J.foreachNotPreserved=function(b_,b$,ca){bl.IterSelector(b_,b$,function(cb){if(cb.closest("[ws-preserve]")==null)ca(cb);});};J.PrepareSingleTemplate=function(b_,b$,ca){var cb;cb=J.FakeRootSingle(ca);return function(cc){J.PrepareTemplateStrict(b_,b$,cb,cc);};};J.foreachNotPreservedwsDOM=function(b_,b$){bl.IterSelectorDoc(b_,function(ca){if(ca.closest("[ws-preserve]")==null)b$(ca);});};J.TextHoleRE=function(){$.$cctor();return $.TextHoleRE;};K=g.Doc=b6.Class({},f,K);K.RunById=function(b_,b$){var ca;ca=self.document.getElementById(b_);if(s.Equals(ca,null))j.FailWith("invalid id: "+b_);else K.Run(ca,b$);};K.Run=function(b_,b$){ba.LinkElement(b_,b$.docNode);K.RunInPlace(false,b_,b$);};K.get_Empty=function(){return K.Mk(null,_2.Const());};K.RunInPlace=function(b_,b$,ca){var cb;cb=ba.CreateRunState(b$,ca.docNode);_2.Sink(bn.get_UseAnimations()||bo.BatchUpdatesEnabled()?bp.StartProcessor(ba.PerformAnimatedUpdate(b_,cb,ca.docNode)):function(){ba.PerformSyncUpdate(b_,cb,ca.docNode);},ca.updates);};K.Mk=function(b_,b$){return new K.New(b_,b$);};K.TextNode=function(b_){return K.Mk({$:5,$0:self.document.createTextNode(b_)},_2.Const());};K.TextView=function(b_){var b$;b$=ba.CreateTextNode();return K.Mk({$:4,$0:b$},_2.Map(function(ca){ba.UpdateTextNode(b$,ca);},b_));};K.New=b6.Ctor(function(b_,b$){f.New.call(this);this.docNode=b_;this.updates=b$;},K);M.Int=function(){M.set_counter(M.counter()+1);return M.counter();};M.set_counter=function(b_){bb.$cctor();bb.counter=b_;};M.counter=function(){bb.$cctor();return bb.counter;};O=N.Dictionary=b6.Class({set_Item:function(b_,b$){this.set(b_,b$);},set:function(b_,b$){var ca,cb,cc,cd;ca=this;cb=this.hash(b_);cc=this.data[cb];if(cc==null){this.count=this.count+1;this.data[cb]=new a.Array({K:b_,V:b$});}else{cd=p.tryFindIndex(function(ce){return ca.equals.apply(null,[(j.KeyValue(ce))[0],b_]);},cc);cd==null?(this.count=this.count+1,cc.push({K:b_,V:b$})):cc[cd.$0]={K:b_,V:b$};}},TryGetValue:function(b_,b$){var ca,cb,cc;ca=this;cb=this.data[this.hash(b_)];return cb==null?false:(cc=p.tryPick(function(cd){var ce;ce=j.KeyValue(cd);return ca.equals.apply(null,[ce[0],b_])?{$:1,$0:ce[1]}:null;},cb),cc!=null&&cc.$==1&&(b$.set(cc.$0),true));},ContainsKey:function(b_){var b$,ca;b$=this;ca=this.data[this.hash(b_)];return ca==null?false:p.exists(function(cb){return b$.equals.apply(null,[(j.KeyValue(cb))[0],b_]);},ca);},RemoveKey:function(b_){return this.remove(b_);},Keys:function(){return new bm.New(this);},GetEnumerator:function(){return _9.Get0(p.concat(x.GetFieldValues(this.data)));},Values:function(){return new bG.New(this);},remove:function(b_){var b$,ca,cb,cc;b$=this;ca=this.hash(b_);cb=this.data[ca];return cb==null?false:(cc=p.filter(function(cd){return!b$.equals.apply(null,[(j.KeyValue(cd))[0],b_]);},cb),p.length(cc)<cb.length&&(this.count=this.count-1,this.data[ca]=cc,true));},Item:function(b_){return this.get(b_);},get:function(b_){var b$,ca;b$=this;ca=this.data[this.hash(b_)];return ca==null?_8.notPresent():p.pick(function(cb){var cc;cc=j.KeyValue(cb);return b$.equals.apply(null,[cc[0],b_])?{$:1,$0:cc[1]}:null;},ca);}},f,O);O.New$5=b6.Ctor(function(){O.New$6.call(this,[],s.Equals,s.Hash);},O);O.New$6=b6.Ctor(function(b_,b$,ca){var cb,cc;f.New.call(this);this.equals=b$;this.hash=ca;this.count=0;this.data=[];cb=_9.Get(b_);try{while(cb.MoveNext()){cc=cb.Current();this.set(cc.K,cc.V);}}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}},O);R.New=function(b_,b$){return{k:b_,ct:b$};};S.New=function(b_,b$){return{c:b_,r:b$};};T=N.HashSet=b6.Class({SAdd:function(b_){return this.add(b_);},Contains:function(b_){var b$;b$=this.data[this.hash(b_)];return b$==null?false:this.arrContains(b_,b$);},add:function(b_){var b$,ca;b$=this.hash(b_);ca=this.data[b$];return ca==null?(this.data[b$]=[b_],this.count=this.count+1,true):this.arrContains(b_,ca)?false:(ca.push(b_),this.count=this.count+1,true);},arrContains:function(b_,b$){var ca,cb,cc,cd;ca=true;cb=0;cd=b$.length;while(ca&&cb<cd)if(this.equals.apply(null,[b$[cb],b_]))ca=false;else cb=cb+1;return!ca;},GetEnumerator:function(){return _9.Get(bM.concat(this.data));},ExceptWith:function(b_){var b$;b$=_9.Get(b_);try{while(b$.MoveNext())this.Remove(b$.Current());}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}},Count:function(){return this.count;},IntersectWith:function(b_){var b$,ca,cb,cc,cd;b$=new T.New$4(b_,this.equals,this.hash);ca=bM.concat(this.data);for(cb=0,cc=ca.length-1;cb<=cc;cb++){cd=ca[cb];if(!b$.Contains(cd))this.Remove(cd);}},Remove:function(b_){var b$;b$=this.data[this.hash(b_)];return b$==null?false:this.arrRemove(b_,b$)&&(this.count=this.count-1,true);},CopyTo:function(b_,b$){var ca,cb,cc;ca=bM.concat(this.data);for(cb=0,cc=ca.length-1;cb<=cc;cb++)p.set(b_,cb+b$,ca[cb]);},arrRemove:function(b_,b$){var ca,cb,cc,cd;ca=true;cb=0;cd=b$.length;while(ca&&cb<cd)if(this.equals.apply(null,[b$[cb],b_])){b$.splice.apply(b$,[cb,1]);ca=false;}else cb=cb+1;return!ca;}},f,T);T.New$3=b6.Ctor(function(){T.New$4.call(this,[],s.Equals,s.Hash);},T);T.New$4=b6.Ctor(function(b_,b$,ca){var cb;f.New.call(this);this.equals=b$;this.hash=ca;this.data=[];this.count=0;cb=_9.Get(b_);try{while(cb.MoveNext())this.add(cb.Current());}finally{if(typeof cb=="object"&&"Dispose"in cb)cb.Dispose();}},T);T.New$2=b6.Ctor(function(b_){T.New$4.call(this,b_,s.Equals,s.Hash);},T);U.append=function(b_,b$){return{GetEnumerator:function(){var ca,cb;ca=_9.Get(b_);cb=[true];return new _.New(ca,null,function(cc){var cd;return cc.s.MoveNext()?(cc.c=cc.s.Current(),true):(cd=cc.s,!s.Equals(cd,null)?cd.Dispose():void 0,cc.s=null,cb[0]&&(cb[0]=false,cc.s=_9.Get(b$),cc.s.MoveNext()?(cc.c=cc.s.Current(),true):(cc.s.Dispose(),cc.s=null,false)));},function(cc){var cd;cd=cc.s;if(!s.Equals(cd,null))cd.Dispose();});}};};U.head=function(b_){var b$;b$=_9.Get(b_);try{return b$.MoveNext()?b$.Current():U.insufficient();}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};U.fold=function(b_,b$,ca){var cb,cc;cb=b$;cc=_9.Get(ca);try{while(cc.MoveNext())cb=b_(cb,cc.Current());return cb;}finally{if(typeof cc=="object"&&"Dispose"in cc)cc.Dispose();}};U.iter=function(b_,b$){var ca;ca=_9.Get(b$);try{while(ca.MoveNext())b_(ca.Current());}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}};U.map=function(b_,b$){return{GetEnumerator:function(){var ca;ca=_9.Get(b$);return new _.New(null,null,function(cb){return ca.MoveNext()&&(cb.c=b_(ca.Current()),true);},function(){ca.Dispose();});}};};U.delay=function(b_){return{GetEnumerator:function(){return _9.Get(b_());}};};U.max=function(b_){var b$,ca,cb;b$=_9.Get(b_);try{if(!b$.MoveNext())U.seqEmpty();ca=b$.Current();while(b$.MoveNext()){cb=b$.Current();if(s.Compare(cb,ca)===1)ca=cb;}return ca;}finally{if(typeof b$=="object"&&"Dispose"in b$)b$.Dispose();}};U.init=function(b_,b$){return U.take(b_,U.initInfinite(b$));};U.seqEmpty=function(){return j.FailWith("The input sequence was empty.");};U.forall=function(b_,b$){return!U.exists(function(ca){return!b_(ca);},b$);};U.take=function(b_,b$){b_<0?U.nonNegative():void 0;return{GetEnumerator:function(){var ca;ca=[_9.Get(b$)];return new _.New(0,null,function(cb){var cc;cb.s=cb.s+1;return cb.s>b_?false:(cc=ca[0],s.Equals(cc,null)?U.insufficient():cc.MoveNext()?(cb.c=cc.Current(),cb.s===b_?(cc.Dispose(),ca[0]=null):void 0,true):(cc.Dispose(),ca[0]=null,U.insufficient()));},function(){var cb;cb=ca[0];if(!s.Equals(cb,null))cb.Dispose();});}};};U.initInfinite=function(b_){return{GetEnumerator:function(){return new _.New(0,null,function(b$){b$.c=b_(b$.s);b$.s=b$.s+1;return true;},void 0);}};};U.exists=function(b_,b$){var ca,cb;ca=_9.Get(b$);try{cb=false;while(!cb&&ca.MoveNext())cb=b_(ca.Current());return cb;}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}};p.choose=function(b_,b$){var ca,cb,cc,cd;ca=[];for(cb=0,cc=b$.length-1;cb<=cc;cb++){cd=b_(b$[cb]);if(cd==null);else ca.push(cd.$0);}return ca;};p.tryFindIndex=function(b_,b$){var ca,cb;ca=null;cb=0;while(cb<b$.length&&ca==null){b_(b$[cb])?ca={$:1,$0:cb}:void 0;cb=cb+1;}return ca;};p.tryPick=function(b_,b$){var ca,cb,cc;ca=null;cb=0;while(cb<b$.length&&ca==null){cc=b_(b$[cb]);if(cc!=null&&cc.$==1)ca=cc;cb=cb+1;}return ca;};p.exists=function(b_,b$){var ca,cb,cc,cd;ca=false;cb=0;cd=p.length(b$);while(!ca&&cb<cd)if(b_(b$[cb]))ca=true;else cb=cb+1;return ca;};p.concat=function(b_){return a.Array.prototype.concat.apply([],p.ofSeq(b_));};p.iter=function(b_,b$){var ca,cb;for(ca=0,cb=b$.length-1;ca<=cb;ca++)b_(b$[ca]);};p.foldBack=function(b_,b$,ca){var cb,cc,cd,ce,cf;cb=ca;cd=b$.length;for(ce=1,cf=cd;ce<=cf;ce++)cb=b_(b$[cd-ce],cb);return cb;};p.map=function(b_,b$){var ca,cb,cc;ca=new a.Array(b$.length);for(cb=0,cc=b$.length-1;cb<=cc;cb++)ca[cb]=b_(b$[cb]);return ca;};p.filter=function(b_,b$){var ca,cb,cc;ca=[];for(cb=0,cc=b$.length-1;cb<=cc;cb++)if(b_(b$[cb]))ca.push(b$[cb]);return ca;};p.ofSeq=function(b_){var b$,ca;if(b_ instanceof a.Array)return b_.slice();else if(b_ instanceof bC)return p.ofList(b_);else{b$=[];ca=_9.Get(b_);try{while(ca.MoveNext())b$.push(ca.Current());return b$;}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}}};p.pick=function(b_,b$){var ca;ca=p.tryPick(b_,b$);return ca==null?j.FailWith("KeyNotFoundException"):ca.$0;};p.ofList=function(b_){var b$,ca;ca=[];b$=b_;while(!(b$.$==0)){ca.push(bB.head(b$));b$=bB.tail(b$);}return ca;};p.forall=function(b_,b$){var ca,cb,cc,cd;ca=true;cb=0;cd=p.length(b$);while(ca&&cb<cd)if(b_(b$[cb]))cb=cb+1;else ca=false;return ca;};p.create=function(b_,b$){var ca,cb,cc;ca=new a.Array(b_);for(cb=0,cc=b_-1;cb<=cc;cb++)ca[cb]=b$;return ca;};p.init=function(b_,b$){var ca,cb,cc;if(b_<0)j.FailWith("Negative size given.");else null;ca=new a.Array(b_);for(cb=0,cc=b_-1;cb<=cc;cb++)ca[cb]=b$(cb);return ca;};V.$cctor=function(){V.$cctor=a.ignore;V.initialized=new O.New$5();};V=n.TemplateInitializer=b6.Class({},f,V);V.GetOrAddHoleFor=function(b_,b$,ca){var cb,cc,cd,ce;V.$cctor();cb=V.GetHolesFor(b_);cc=(cd=null,[cb.TryGetValue(b$,{get:function(){return cd;},set:function(cf){cd=cf;}}),cd]);return cc[0]?cc[1]:(ce=ca(),(cb.set_Item(b$,ce),ce));};V.GetHolesFor=function(b_){var b$,ca,cb;V.$cctor();b$=(ca=null,[V.initialized.TryGetValue(b_,{get:function(){return ca;},set:function(cc){ca=cc;}}),ca]);return b$[0]?b$[1]:(cb=new O.New$5(),(V.initialized.set_Item(b_,cb),cb));};W=B.VarStr=b6.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:this.fillWith.get_View()};},AddAttribute:function(b_,b$){(b_(b$))(bx.Value(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_2.Map(a.String,this.fillWith.get_View())};}},A,W);W.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},W);X=B.VarFloatUnchecked=b6.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_2.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b_,b$){(b_(b$))(bx.FloatValueUnchecked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_2.Map(a.String,this.fillWith.get_View())};}},A,X);X.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},X);Y=B.VarBool=b6.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_2.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b_,b$){(b_(b$))(bx.Checked(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_2.Map(a.String,this.fillWith.get_View())};}},A,Y);Y.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},Y);Z=B.VarDateTime=b6.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_2.Map(function(b_){return(new a.Date(b_)).toLocaleString();},this.fillWith.get_View())};},AddAttribute:function(b_,b$){(b_(b$))(bx.DateTimeValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_2.Map(function(b_){return(new a.Date(b_)).toLocaleString();},this.fillWith.get_View())};}},A,Z);Z.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},Z);_0=B.VarFile=b6.Class({get_Name:function(){return this.name;},ForTextView:function(){return{$:1,$0:_2.Map(a.String,this.fillWith.get_View())};},AddAttribute:function(b_,b$){(b_(b$))(bx.FileValue(this.fillWith));},get_AsChoiceView:function(){return{$:1,$0:_2.Map(a.String,this.fillWith.get_View())};}},A,_0);_0.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},_0);_1=B.VarDomElement=b6.Class({get_Name:function(){return this.name;},get_Value:function(){return this.fillWith;}},A,_1);_1.New=b6.Ctor(function(b_,b$){A.New.call(this);this.name=b_;this.fillWith=b$;},_1);z.Obsolete=function(b_){var b$,ca,cb,cc,cd;ca=b_.s;if(ca==null||(ca!=null&&ca.$==2?(b$=ca.$1,false):ca!=null&&ca.$==3?(b$=ca.$1,false):true))void 0;else{b_.s=null;for(cb=0,cc=p.length(b$)-1;cb<=cc;cb++){cd=p.get(b$,cb);if(typeof cd=="object")(function(ce){z.Obsolete(ce);}(cd));else cd();}}};z.New=function(b_){return{s:b_};};_2=g.View=b6.Class({},null,_2);_3.TryParseInt32=function(b_,b$){return _3.TryParse(b_,-2147483648,2147483647,b$);};_4=G.Scheduler=b6.Class({Fork:function(b_){var b$;b$=this;this.robin.push(b_);if(this.idle){this.idle=false;a.setTimeout(function(){b$.tick();},0);}},tick:function(){var b_,b$,ca;b$=this;ca=b9.now();b_=true;while(b_)if(this.robin.length===0){this.idle=true;b_=false;}else{(this.robin.shift())();b9.now()-ca>40?(a.setTimeout(function(){b$.tick();},0),b_=false):void 0;}}},f,_4);_4.New=b6.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},_4);_6=u.NonStandardPromiseRejectionException=b6.Class({},_5,_6);_6.New=b6.Ctor(function(b_){this.message="Promise rejected";Q.setPrototypeOf(this,_6.prototype);this.reason=b_;},_6);_7.$cctor=function(){_7.$cctor=a.ignore;_7.noneCT=S.New(false,[]);_7.scheduler=new _4.New();_7.defCTS=[new bf.New()];_7.Zero=G.Return();_7.GetCT=function(b_){b_.k({$:0,$0:b_.ct});};};_8.notPresent=function(){throw new bR.New();};_9.Get=function(b_){return b_ instanceof a.Array?_9.ArrayEnumerator(b_):s.Equals(typeof b_,"string")?_9.StringEnumerator(b_):b_.GetEnumerator();};_9.ArrayEnumerator=function(b_){return new _.New(0,null,function(b$){var ca;ca=b$.s;return ca<p.length(b_)&&(b$.c=p.get(b_,ca),b$.s=ca+1,true);},void 0);};_9.StringEnumerator=function(b_){return new _.New(0,null,function(b$){var ca;ca=b$.s;return ca<b_.length&&(b$.c=b_[ca],b$.s=ca+1,true);},void 0);};_9.Get0=function(b_){return b_ instanceof a.Array?_9.ArrayEnumerator(b_):s.Equals(typeof b_,"string")?_9.StringEnumerator(b_):"GetEnumerator0"in b_?b_.GetEnumerator0():b_.GetEnumerator();};_=_9.T=b6.Class({MoveNext:function(){var b_;b_=this.n(this);this.e=b_?1:2;return b_;},Current:function(){return this.e===1?this.c:this.e===0?j.FailWith("Enumeration has not started. Call MoveNext."):j.FailWith("Enumeration already finished.");},Dispose:function(){if(this.d)this.d(this);}},f,_);_.New=b6.Ctor(function(b_,b$,ca,cb){f.New.call(this);this.s=b_;this.c=b$;this.n=ca;this.d=cb;this.e=0;},_);$.$cctor=function(){$.$cctor=a.ignore;$.LoadedTemplates=new O.New$5();$.LocalTemplatesLoaded=false;$.GlobalHoles=new O.New$5();$.TextHoleRE="\\${([^}]+)}";$.RenderedFullDocTemplate=null;};ba.LinkElement=function(b_,b$){ba.InsertDoc(b_,b$,null);};ba.InsertDoc=function(b_,b$,ca){var cb,cc,cd;while(true)if(b$!=null&&b$.$==1)return ba.InsertNode(b_,b$.$0.El,ca);else if(b$!=null&&b$.$==2){cb=b$.$0;cb.Dirty=false;b$=cb.Current;}else if(b$==null)return ca;else if(b$!=null&&b$.$==4)return ba.InsertNode(b_,b$.$0.Text,ca);else if(b$!=null&&b$.$==5)return ba.InsertNode(b_,b$.$0,ca);else if(b$!=null&&b$.$==6)return p.foldBack(function(ce,cf){return(((b6.Curried3(function(cg,ch,ci){return ch==null||ch.constructor===Q?ba.InsertDoc(cg,ch,ci):ba.InsertNode(cg,ch,ci);}))(b_))(ce))(cf);},b$.$0.Els,ca);else{cc=b$.$1;cd=b$.$0;b$=cd;ca=ba.InsertDoc(b_,cc,ca);}};ba.CreateRunState=function(b_,b$){return bI.New(bJ.get_Empty(),ba.CreateElemNode(b_,bs.EmptyAttr(),b$));};ba.PerformAnimatedUpdate=function(b_,b$,ca){var cb;return bn.get_UseAnimations()?(cb=null,G.Delay(function(){var cc,cd,ce;cc=bJ.FindAll(ca);cd=ba.ComputeChangeAnim(b$,cc);ce=ba.ComputeEnterAnim(b$,cc);return G.Bind(bn.Play(bn.Append(cd,ba.ComputeExitAnim(b$,cc))),function(){return G.Bind(ba.SyncElemNodesNextFrame(b_,b$),function(){return G.Bind(bn.Play(ce),function(){b$.PreviousNodes=cc;return G.Return(null);});});});})):ba.SyncElemNodesNextFrame(b_,b$);};ba.PerformSyncUpdate=function(b_,b$,ca){var cb;cb=bJ.FindAll(ca);ba.SyncElemNode(b_,b$.Top);b$.PreviousNodes=cb;};ba.InsertBeforeDelim=function(b_,b$){var ca,cb;ca=b_.parentNode;cb=self.document.createTextNode("");ca.insertBefore(cb,b_);ba.LinkPrevElement(b_,b$);return cb;};ba.InsertNode=function(b_,b$,ca){bl.InsertAt(b_,ca,b$);return b$;};ba.CreateElemNode=function(b_,b$,ca){var cb;ba.LinkElement(b_,ca);cb=bs.Insert(b_,b$);return bc.New(cb,ca,null,b_,M.Int(),b6.GetOptional(cb.OnAfterRender));};ba.SyncElemNodesNextFrame=function(b_,b$){function ca(cb){a.requestAnimationFrame(function(){ba.SyncElemNode(b_,b$.Top);cb();});}return bo.BatchUpdatesEnabled()?G.FromContinuations(function(cb,cc,cd){return ca.apply(null,[cb,cc,cd]);}):(ba.SyncElemNode(b_,b$.Top),G.Return(null));};ba.ComputeExitAnim=function(b_,b$){return bn.Concat(p.map(function(ca){return bs.GetExitAnim(ca.Attr);},bJ.ToArray(bJ.Except(b$,bJ.Filter(function(ca){return bs.HasExitAnim(ca.Attr);},b_.PreviousNodes)))));};ba.ComputeEnterAnim=function(b_,b$){return bn.Concat(p.map(function(ca){return bs.GetEnterAnim(ca.Attr);},bJ.ToArray(bJ.Except(b_.PreviousNodes,bJ.Filter(function(ca){return bs.HasEnterAnim(ca.Attr);},b$)))));};ba.ComputeChangeAnim=function(b_,b$){var ca;function cb(cc){return bs.HasChangeAnim(cc.Attr);}ca=function(cc){return bJ.Filter(cb,cc);};return bn.Concat(p.map(function(cc){return bs.GetChangeAnim(cc.Attr);},bJ.ToArray(bJ.Intersect(ca(b_.PreviousNodes),ca(b$)))));};ba.SyncElemNode=function(b_,b$){!b_?ba.SyncElement(b$):void 0;ba.Sync(b$.Children);ba.AfterRender(b$);};ba.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};ba.UpdateTextNode=function(b_,b$){b_.Value=b$;b_.Dirty=true;};ba.LinkPrevElement=function(b_,b$){ba.InsertDoc(b_.parentNode,b$,b_);};ba.SyncElement=function(b_){function b$(ca){function cb(cc){var cd,ce,cf,cg;while(true){if(cc!=null&&cc.$==0){ce=cc.$1;cf=cc.$0;if(cb(cf))return true;else cc=ce;}else if(cc!=null&&cc.$==2){cg=cc.$0;if(cg.Dirty)return true;else cc=cg.Current;}else return cc!=null&&cc.$==6&&(cd=cc.$0,cd.Dirty||p.exists(b$,cd.Holes));}}return cb(ca.Children);}bs.Sync(b_.El,b_.Attr);if(b$(b_))ba.DoSyncElement(b_);};ba.Sync=function(b_){var b$,ca,cb,cc,cd;while(true){if(b_!=null&&b_.$==1)return ba.SyncElemNode(false,b_.$0);else if(b_!=null&&b_.$==2){cb=b_.$0;b_=cb.Current;}else if(b_==null)return null;else if(b_!=null&&b_.$==5)return null;else if(b_!=null&&b_.$==4){b$=b_.$0;return b$.Dirty?(b$.Text.nodeValue=b$.Value,b$.Dirty=false):null;}else if(b_!=null&&b_.$==6){ca=b_.$0;p.iter(function(ce){ba.SyncElemNode(false,ce);},ca.Holes);p.iter(function(ce){bs.Sync(ce[0],ce[1]);},ca.Attrs);return ba.AfterRender(ca);}else{cc=b_.$1;cd=b_.$0;ba.Sync(cd);b_=cc;}}};ba.AfterRender=function(b_){var b$;b$=b6.GetOptional(b_.Render);if(b$!=null&&b$.$==1){b$.$0(b_.El);b6.SetOptional(b_,"Render",null);}};ba.DoSyncElement=function(b_){var b$,ca,cb;function cc(cd,ce){var cf,cg,ch,ci;while(true){if(cd!=null&&cd.$==1)return cd.$0.El;else if(cd!=null&&cd.$==2){cg=cd.$0;if(cg.Dirty){cg.Dirty=false;return ba.InsertDoc(b$,cg.Current,ce);}else cd=cg.Current;}else if(cd==null)return ce;else if(cd!=null&&cd.$==4)return cd.$0.Text;else if(cd!=null&&cd.$==5)return cd.$0;else if(cd!=null&&cd.$==6){cf=cd.$0;cf.Dirty?cf.Dirty=false:void 0;return p.foldBack(function(cj,ck){return cj==null||cj.constructor===Q?cc(cj,ck):cj;},cf.Els,ce);}else{ch=cd.$1;ci=cd.$0;cd=ci;ce=cc(ch,ce);}}}b$=b_.El;bY.Iter((ca=b_.El,function(cd){bl.RemoveNode(ca,cd);}),bY.Except(bY.DocChildren(b_),bY.Children(b_.El,b6.GetOptional(b_.Delimiters))));cc(b_.Children,(cb=b6.GetOptional(b_.Delimiters),cb!=null&&cb.$==1?cb.$0[1]:null));};bb.$cctor=function(){bb.$cctor=a.ignore;bb.counter=0;};bc=g.DocElemNode=b6.Class({Equals:function(b_){return this.ElKey===b_.ElKey;},GetHashCode:function(){return this.ElKey;}},null,bc);bc.New=function(b_,b$,ca,cb,cc,cd){var ce;return new bc((ce={Attr:b_,Children:b$,El:cb,ElKey:cc},(b6.SetOptional(ce,"Delimiters",ca),b6.SetOptional(ce,"Render",cd),ce)));};be=b.OperationCanceledException=b6.Class({},_5,be);be.New=b6.Ctor(function(b_){be.New$1.call(this,"The operation was canceled.",null,b_);},be);be.New$1=b6.Ctor(function(b_,b$,ca){this.message=b_;this.inner=b$;Q.setPrototypeOf(this,be.prototype);this.ct=ca;},be);bf=b.CancellationTokenSource=b6.Class({},f,bf);bf.New=b6.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bf);bh=g.Elt=b6.Class({},K,bh);bh.TreeNode=function(b_,b$){var ca,cb;function cc(cd,ce){return bs.Updates(ce);}ca=bF.Create(b$);return new bh.New$1({$:6,$0:b_},_2.Map2Unit((cb=p.map(function(cd){return cc(cd[0],cd[1]);},b_.Attrs),bE.TreeReduce(_2.Const(),_2.Map2Unit,cb)),ca.v),p.get(b_.Els,0),ca);};bh.New$1=b6.Ctor(function(b_,b$,ca,cb){K.New.call(this,b_,b$);this.docNode$1=b_;this.updates$1=b$;this.elt=ca;this.rvUpdates=cb;},bh);_2.Const=function(b_){var b$;b$=z.New({$:0,$0:b_});return function(){return b$;};};_2.Sink=function(b_,b$){function ca(){z.WhenRun(b$(),b_,function(){G.scheduler().Fork(ca);});}G.scheduler().Fork(ca);};_2.Map=function(b_,b$){return _2.CreateLazy(function(){return z.Map(b_,b$());});};_2.Map3=function(b_,b$,ca,cb){return _2.CreateLazy(function(){return z.Map3(b_,b$(),ca(),cb());});};_2.Sequence=function(b_){return _2.CreateLazy(function(){return z.Sequence(U.map(function(b$){return b$();},b_));});};_2.Map2=function(b_,b$,ca){return _2.CreateLazy(function(){return z.Map2(b_,b$(),ca());});};_2.Map2Unit=function(b_,b$){return _2.CreateLazy(function(){return z.Map2Unit(b_(),b$());});};_2.CreateLazy=function(b_){var b$;b$={c:null,o:b_};return function(){var ca,cb;ca=b$.c;return ca===null?(ca=b$.o(),b$.c=ca,(cb=ca.s,cb!=null&&cb.$==0)?b$.o=null:z.WhenObsoleteRun(ca,function(){b$.c=null;}),ca):ca;};};bj.convertTextNode=function(b_){var b$,ca,cb,cc,cd,ce;b$=null;ca=0;cc=b_.textContent;cd=new a.RegExp(J.TextHoleRE(),"g");while(b$=cd.exec(cc),b$!==null){b_.parentNode.insertBefore(self.document.createTextNode(bk.string(cc,{$:1,$0:ca},{$:1,$0:cd.lastIndex-p.get(b$,0).length-1})),b_);ca=cd.lastIndex;ce=self.document.createElement("span");ce.setAttribute("ws-replace",p.get(b$,1).toLowerCase());b_.parentNode.insertBefore(ce,b_);}cd.lastIndex=0;b_.textContent=bk.string(cc,{$:1,$0:ca},null);};bj.failNotLoaded=function(b_){b7.warn("Instantiating non-loaded template",b_);};bj.fillTextHole=function(b_,b$,ca){var cb;cb=b_.querySelector("[ws-replace]");return s.Equals(cb,null)?(b7.warn("Filling non-existent text hole",ca),null):(cb.parentNode.replaceChild(self.document.createTextNode(b$),cb),{$:1,$0:cb.getAttribute("ws-replace")});};bj.removeHolesExcept=function(b_,b$){function ca(cb){J.foreachNotPreserved(b_,"["+cb+"]",function(cc){if(!b$.Contains(cc.getAttribute(cb)))cc.removeAttribute(cb);});}ca("ws-attr");ca("ws-onafterrender");ca("ws-var");J.foreachNotPreserved(b_,"[ws-hole]",function(cb){if(!b$.Contains(cb.getAttribute("ws-hole"))){cb.removeAttribute("ws-hole");while(cb.hasChildNodes())cb.removeChild(cb.lastChild);}});J.foreachNotPreserved(b_,"[ws-replace]",function(cb){if(!b$.Contains(cb.getAttribute("ws-replace")))cb.parentNode.removeChild(cb);});J.foreachNotPreserved(b_,"[ws-on]",function(cb){cb.setAttribute("ws-on",bD.concat(" ",p.filter(function(cc){return b$.Contains(p.get(bD.SplitChars(cc,[":"],1),1));},bD.SplitChars(cb.getAttribute("ws-on"),[" "],1))));});J.foreachNotPreserved(b_,"[ws-attr-holes]",function(cb){var cc,cd,ce,cf,cg;cc=bD.SplitChars(cb.getAttribute("ws-attr-holes"),[" "],1);for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=p.get(cc,cd);cb.setAttribute(cf,(cg=new a.RegExp(J.TextHoleRE(),"g"),cb.getAttribute(cf).replace(cg,function(ch,ci){return b$.Contains(ci)?ch:"";})));}});};bj.fillInstanceAttrs=function(b_,b$){var ca,cb,cc,cd,ce;bj.convertAttrs(b$);ca=b$.nodeName.toLowerCase();cb=b_.querySelector("[ws-attr="+ca+"]");if(s.Equals(cb,null))b7.warn("Filling non-existent attr hole",ca);else{cb.removeAttribute("ws-attr");for(cc=0,cd=b$.attributes.length-1;cc<=cd;cc++){ce=b$.attributes.item(cc);if(ce.name=="class"&&cb.hasAttribute("class"))cb.setAttribute("class",cb.getAttribute("class")+" "+ce.nodeValue);else cb.setAttribute(ce.name,ce.nodeValue);}}};bj.mapHoles=function(b_,b$){function ca(cb){J.foreachNotPreserved(b_,"["+cb+"]",function(cc){var cd,ce;cd=(ce=null,[b$.TryGetValue(cc.getAttribute(cb).toLowerCase(),{get:function(){return ce;},set:function(cf){ce=cf;}}),ce]);if(cd[0])cc.setAttribute(cb,cd[1]);});}ca("ws-hole");ca("ws-replace");ca("ws-attr");ca("ws-onafterrender");ca("ws-var");J.foreachNotPreserved(b_,"[ws-on]",function(cb){cb.setAttribute("ws-on",bD.concat(" ",p.map(function(cc){var cd,ce,cf;cd=bD.SplitChars(cc,[":"],1);ce=(cf=null,[b$.TryGetValue(p.get(cd,1),{get:function(){return cf;},set:function(cg){cf=cg;}}),cf]);return ce[0]?p.get(cd,0)+":"+ce[1]:cc;},bD.SplitChars(cb.getAttribute("ws-on"),[" "],1))));});J.foreachNotPreserved(b_,"[ws-attr-holes]",function(cb){var cc,cd,ce;cc=bD.SplitChars(cb.getAttribute("ws-attr-holes"),[" "],1);for(cd=0,ce=cc.length-1;cd<=ce;cd++)(function(){var cf;function cg(ch,ci){var cj;cj=j.KeyValue(ci);return ch.replace(new a.RegExp("\\${"+cj[0]+"}","ig"),"${"+cj[1]+"}");}cf=p.get(cc,cd);return cb.setAttribute(cf,(((b6.Curried3(U.fold))(cg))(cb.getAttribute(cf)))(b$));}());});};bj.fill=function(b_,b$,ca){while(true)if(b_.hasChildNodes())ca=b$.insertBefore(b_.lastChild,ca);else return null;};bj.convertAttrs=function(b_){var ca,cb,cc,cd,ce,cf,cg,ch;function b$(ci){var cj;cj=b_.getAttribute(ci);if(cj==null);else b_.setAttribute(ci,cj.toLowerCase());}ca=b_.attributes;cb=[];cc=[];cd=[];for(ce=0,cf=ca.length-1;ce<=cf;ce++){cg=ca.item(ce);if(bD.StartsWith(cg.nodeName,"ws-on")&&cg.nodeName!="ws-onafterrender"&&cg.nodeName!="ws-on"){cb.push(cg.nodeName);cc.push(bk.string(cg.nodeName,{$:1,$0:"ws-on".length},null)+":"+cg.nodeValue.toLowerCase());}else!bD.StartsWith(cg.nodeName,"ws-")&&(new a.RegExp(J.TextHoleRE())).test(cg.nodeValue)?(cg.nodeValue=(ch=new a.RegExp(J.TextHoleRE(),"g"),cg.nodeValue.replace(ch,function(ci,cj){return"${"+cj.toLowerCase()+"}";})),cd.push(cg.nodeName)):void 0;}if(!(cc.length==0))b_.setAttribute("ws-on",bD.concat(" ",cc));if(!(cd.length==0))b_.setAttribute("ws-attr-holes",bD.concat(" ",cd));b$("ws-hole");b$("ws-replace");b$("ws-attr");b$("ws-onafterrender");b$("ws-var");p.iter(function(ci){b_.removeAttribute(ci);},cb);};bk.string=function(b_,b$,ca){var cb,cc;return b$==null?ca!=null&&ca.$==1?(cb=ca.$0,cb<0?"":b_.slice(0,cb+1)):"":ca==null?b_.slice(b$.$0):(cc=ca.$0,cc<0?"":b_.slice(b$.$0,cc+1));};bl.ParseHTMLIntoFakeRoot=function(b_){var b$,ca,cb,cc,cd;function ce(cf,cg){var ch;while(true)if(cg===0)return cf;else{ch=cg;cf=cf.lastChild;cg=ch-1;}}b$=self.document.createElement("div");return!bl.rhtml().test(b_)?(b$.appendChild(self.document.createTextNode(b_)),b$):(ca=(cb=bl.rtagName().exec(b_),s.Equals(cb,null)?"":p.get(cb,1).toLowerCase()),(cc=(cd=(bl.wrapMap())[ca],cd?cd:bl.defaultWrap()),(b$.innerHTML=cc[1]+b_.replace(bl.rxhtmlTag(),"<$1></$2>")+cc[2],ce(b$,cc[0]))));};bl.ChildrenArray=function(b_){var b$,ca,cb;b$=[];for(ca=0,cb=b_.childNodes.length-1;ca<=cb;ca++)b$.push(b_.childNodes[ca]);return b$;};bl.rhtml=function(){bN.$cctor();return bN.rhtml;};bl.wrapMap=function(){bN.$cctor();return bN.wrapMap;};bl.defaultWrap=function(){bN.$cctor();return bN.defaultWrap;};bl.rxhtmlTag=function(){bN.$cctor();return bN.rxhtmlTag;};bl.rtagName=function(){bN.$cctor();return bN.rtagName;};bl.IterSelector=function(b_,b$,ca){var cb,cc,cd;cb=b_.querySelectorAll(b$);for(cc=0,cd=cb.length-1;cc<=cd;cc++)ca(cb[cc]);};bl.IterSelectorDoc=function(b_,b$){var ca,cb,cc;ca=self.document.querySelectorAll(b_);for(cb=0,cc=ca.length-1;cb<=cc;cb++)b$(ca[cb]);};bl.InsertAt=function(b_,b$,ca){var cb;if(!(ca.parentNode===b_&&b$===(cb=ca.nextSibling,s.Equals(cb,null)?null:cb)))b_.insertBefore(ca,b$);};bl.RemoveNode=function(b_,b$){if(b$.parentNode===b_)b_.removeChild(b$);};U.insufficient=function(){return j.FailWith("The input sequence has an insufficient number of elements.");};U.nonNegative=function(){return j.FailWith("The input must be non-negative.");};bm=N.KeyCollection=b6.Class({GetEnumerator:function(){return _9.Get(U.map(function(b_){return b_.K;},this.d));}},f,bm);bm.New=b6.Ctor(function(b_){f.New.call(this);this.d=b_;},bm);bn.get_UseAnimations=function(){return bK.UseAnimations();};bn.Play=function(b_){var b$;b$=null;return G.Delay(function(){return G.Bind(bn.Run(a.ignore,bK.Actions(b_)),function(){bK.Finalize(b_);return G.Return(null);});});};bn.Append=function(b_,b$){return{$:0,$0:bP.Append(b_.$0,b$.$0)};};bn.Run=function(b_,b$){var ca;function cb(cc){function cd(ce){return function(cf){var cg;cg=cf-ce;b$.Compute(cg);b_();return cg<=ca?void a.requestAnimationFrame(function(ch){(cd(ce))(ch);}):cc();};}a.requestAnimationFrame(function(ce){(cd(ce))(ce);});}ca=b$.Duration;return ca===0?G.Zero():G.FromContinuations(function(cc,cd,ce){return cb.apply(null,[cc,cd,ce]);});};bn.Concat=function(b_){return{$:0,$0:bP.Concat(U.map(bK.List,b_))};};bn.get_Empty=function(){return{$:0,$0:bP.Empty()};};bo.BatchUpdatesEnabled=function(){bL.$cctor();return bL.BatchUpdatesEnabled;};bp.StartProcessor=function(b_){var b$;function ca(){var cb;cb=null;return G.Delay(function(){return G.Bind(b_,function(){var cc;cc=b$[0];return s.Equals(cc,1)?(b$[0]=0,G.Zero()):s.Equals(cc,2)?(b$[0]=1,ca()):G.Zero();});});}b$=[0];return function(){var cb;cb=b$[0];if(s.Equals(cb,0)){b$[0]=1;G.Start(ca(),null);}else s.Equals(cb,1)?b$[0]=2:void 0;};};br.New=function(b_,b$,ca,cb){var cc;cc={DynElem:b_,DynFlags:b$,DynNodes:ca};b6.SetOptional(cc,"OnAfterRender",cb);return cc;};bs.Insert=function(b_,b$){var ca,cb,cc;function cd(ce){var cf,cg;while(true)if(!(ce===null)){if(ce!=null&&ce.$==1)return ca.push(ce.$0);else if(ce!=null&&ce.$==2){cf=ce.$1;cg=ce.$0;cd(cg);ce=cf;}else return ce!=null&&ce.$==3?ce.$0(b_):ce!=null&&ce.$==4?cb.push(ce.$0):null;}else return null;}ca=[];cb=[];cd(b$);cc=ca.slice(0);return br.New(b_,bs.Flags(b$),cc,cb.length===0?null:{$:1,$0:function(ce){U.iter(function(cf){cf(ce);},cb);}});};bs.Updates=function(b_){return bE.MapTreeReduce(function(b$){return b$.NChanged();},_2.Const(),_2.Map2Unit,b_.DynNodes);};bs.Empty=function(b_){return br.New(b_,0,[],null);};bs.Flags=function(b_){return b_!==null&&b_.hasOwnProperty("flags")?b_.flags:0;};bs.Static=function(b_){return new by({$:3,$0:b_});};bs.Dynamic=function(b_,b$){return new by({$:1,$0:new bQ.New(b_,b$)});};bs.EmptyAttr=function(){bS.$cctor();return bS.EmptyAttr;};bs.HasExitAnim=function(b_){var b$;b$=2;return(b_.DynFlags&b$)===b$;};bs.GetExitAnim=function(b_){return bs.GetAnim(b_,function(b$,ca){return b$.NGetExitAnim(ca);});};bs.HasEnterAnim=function(b_){var b$;b$=1;return(b_.DynFlags&b$)===b$;};bs.GetEnterAnim=function(b_){return bs.GetAnim(b_,function(b$,ca){return b$.NGetEnterAnim(ca);});};bs.HasChangeAnim=function(b_){var b$;b$=4;return(b_.DynFlags&b$)===b$;};bs.GetChangeAnim=function(b_){return bs.GetAnim(b_,function(b$,ca){return b$.NGetChangeAnim(ca);});};bs.AppendTree=function(b_,b$){var ca;return b_===null?b$:b$===null?b_:(ca=new by({$:2,$0:b_,$1:b$}),(bs.SetFlags(ca,bs.Flags(b_)|bs.Flags(b$)),ca));};bs.GetAnim=function(b_,b$){return bn.Concat(p.map(function(ca){return b$(ca,b_.DynElem);},b_.DynNodes));};bs.Sync=function(b_,b$){p.iter(function(ca){ca.NSync(b_);},b$.DynNodes);};bs.SetFlags=function(b_,b$){b_.flags=b$;};bt=B.Elt=b6.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},A,bt);bu=B.Text=b6.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;},get_AsChoiceView:function(){return{$:0,$0:this.fillWith};}},A,bu);bv=B.Attribute=b6.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},A,bv);bw=B.Event=b6.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},A,bw);bx.Handler=function(b_,b$){return bs.Static(function(ca){ca.addEventListener(b_,function(cb){return(b$(ca))(cb);},false);});};bx.OnAfterRender=function(b_){return new by({$:4,$0:b_});};bx.Dynamic=function(b_,b$){return bs.Dynamic(b$,function(ca){return function(cb){return ca.setAttribute(b_,cb);};});};bx.Value=function(b_){return bx.ValueWith(bV.StringApply(),b_);};bx.FloatValueUnchecked=function(b_){return bx.ValueWith(bV.FloatApplyUnchecked(),b_);};bx.Checked=function(b_){return bx.ValueWith(bV.BoolCheckedApply(),b_);};bx.DateTimeValue=function(b_){return bx.ValueWith(bV.DateTimeApplyUnchecked(),b_);};bx.FileValue=function(b_){return bx.ValueWith(bV.FileApplyUnchecked(),b_);};bx.ValueWith=function(b_,b$){var ca;ca=b_(b$);return by.Append(bs.Static(ca[0]),bx.DynamicCustom(ca[1],ca[2]));};bx.DynamicCustom=function(b_,b$){return bs.Dynamic(b$,b_);};by=g.AttrProxy=b6.Class({},null,by);by.Handler=function(b_,b$){return by.HandlerImpl(b_,b$);};by.Concat=function(b_){var b$;b$=bE.ofSeqNonCopying(b_);return bE.TreeReduce(bs.EmptyAttr(),by.Append,b$);};by.Create=function(b_,b$){return bs.Static(function(ca){ca.setAttribute(b_,b$);});};by.HandlerImpl=function(b_,b$){return bs.Static(function(ca){ca.addEventListener(b_,function(cb){return(b$(ca))(cb);},false);});};by.Append=function(b_,b$){return bs.AppendTree(b_,b$);};bz=B.AfterRender=b6.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},A,bz);bA=B.AfterRenderQ=b6.Class({get_Value:function(){return this.fillWith;},get_Name:function(){return this.name;}},A,bA);bC=bB.T=b6.Class({GetEnumerator:function(){return new _.New(this,null,function(b_){var b$;b$=b_.s;return b$.$==0?false:(b_.c=b$.$0,b_.s=b$.$1,true);},void 0);}},null,bC);bC.Empty=new bC({$:0});bD.concat=function(b_,b$){return p.ofSeq(b$).join(b_);};bD.SplitChars=function(b_,b$,ca){return bD.Split(b_,new a.RegExp("["+bD.RegexEscape(b$.join(""))+"]"),ca);};bD.StartsWith=function(b_,b$){return b_.substring(0,b$.length)==b$;};bD.Split=function(b_,b$,ca){return ca===1?p.filter(function(cb){return cb!=="";},bD.SplitWith(b_,b$)):bD.SplitWith(b_,b$);};bD.RegexEscape=function(b_){return b_.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bD.SplitWith=function(b_,b$){return b_.split(b$);};bD.forall=function(b_,b$){return U.forall(b_,bD.protect(b$));};bD.protect=function(b_){return b_==null?"":b_;};bE.TreeReduce=function(b_,b$,ca){var cb;function cc(cd){return function(ce){var cf,cg;switch(ce<=0?0:ce===1?cd>=0&&cd<cb?1:(cf=ce,2):(cf=ce,2)){case 0:return b_;case 1:return p.get(ca,cd);case 2:cg=ce/2>>0;return b$((cc(cd))(cg),(cc(cd+cg))(ce-cg));}};}cb=p.length(ca);return(cc(0))(cb);};bE.MapTreeReduce=function(b_,b$,ca,cb){var cc;function cd(ce){return function(cf){var cg,ch;switch(cf<=0?0:cf===1?ce>=0&&ce<cc?1:(cg=cf,2):(cg=cf,2)){case 0:return b$;case 1:return b_(p.get(cb,ce));case 2:ch=cf/2>>0;return ca((cd(ce))(ch),(cd(ce+ch))(cf-ch));}};}cc=p.length(cb);return(cd(0))(cc);};bE.ofSeqNonCopying=function(b_){var b$,ca;if(b_ instanceof a.Array)return b_;else if(b_ instanceof bC)return p.ofList(b_);else if(b_===null)return[];else{b$=[];ca=_9.Get(b_);try{while(ca.MoveNext())b$.push(ca.Current());return b$;}finally{if(typeof ca=="object"&&"Dispose"in ca)ca.Dispose();}}};bF=g.Updates=b6.Class({},null,bF);bF.Create=function(b_){var b$;b$=null;b$=bF.New(b_,null,function(){var ca;ca=b$.s;return ca===null?(ca=z.Copy(b$.c()),b$.s=ca,z.WhenObsoleteRun(ca,function(){b$.s=null;}),ca):ca;});return b$;};bF.New=function(b_,b$,ca){return new bF({c:b_,s:b$,v:ca});};bG=N.ValueCollection=b6.Class({GetEnumerator:function(){return _9.Get(U.map(function(b_){return b_.V;},this.d));}},f,bG);bG.New=b6.Ctor(function(b_){f.New.call(this);this.d=b_;},bG);bI.New=function(b_,b$){return{PreviousNodes:b_,Top:b$};};bJ.get_Empty=function(){return{$:0,$0:new T.New$3()};};bJ.FindAll=function(b_){var b$;function ca(cd,ce){var cf,cg,ch,ci,cj;while(true)switch(cd){case 0:if(ce!=null&&ce.$==0){cg=ce.$1;ch=ce.$0;ca(0,ch);ce=cg;}else if(ce!=null&&ce.$==1){ci=ce.$0;ce=ci;cd=1;}else if(ce!=null&&ce.$==2){cj=ce.$0;ce=cj.Current;}else return ce!=null&&ce.$==6?(cf=ce.$0.Holes,(function(ck){return function(cl){p.iter(ck,cl);};}(cc))(cf)):null;break;case 1:b$.push(ce);ce=ce.Children;cd=0;break;}}function cb(cd){return ca(0,cd);}function cc(cd){return ca(1,cd);}b$=[];cb(b_);return{$:0,$0:new T.New$2(b$)};};bJ.Filter=function(b_,b$){return{$:0,$0:bU.Filter(b_,b$.$0)};};bJ.Except=function(b_,b$){return{$:0,$0:bU.Except(b_.$0,b$.$0)};};bJ.ToArray=function(b_){return bU.ToArray(b_.$0);};bJ.Intersect=function(b_,b$){return{$:0,$0:bU.Intersect(b_.$0,b$.$0)};};bK.UseAnimations=function(){bO.$cctor();return bO.UseAnimations;};bK.Actions=function(b_){return bK.ConcatActions(p.choose(function(b$){return b$.$==1?{$:1,$0:b$.$0}:null;},bP.ToArray(b_.$0)));};bK.Finalize=function(b_){p.iter(function(b$){if(b$.$==0)b$.$0();},bP.ToArray(b_.$0));};bK.ConcatActions=function(b_){var b$,ca,cb,cc;b$=bE.ofSeqNonCopying(b_);ca=p.length(b$);return ca===0?bK.Const():ca===1?p.get(b$,0):(cb=U.max(U.map(function(cd){return cd.Duration;},b$)),(cc=p.map(function(cd){return bK.Prolong(cb,cd);},b$),bK.Def(cb,function(cd){p.iter(function(ce){ce.Compute(cd);},cc);})));};bK.List=function(b_){return b_.$0;};bK.Const=function(b_){return bK.Def(0,function(){return b_;});};bK.Def=function(b_,b$){return{Compute:b$,Duration:b_};};bK.Prolong=function(b_,b$){var ca,cb,cc;ca=b$.Compute;cb=b$.Duration;cc=b1.Create(function(){return b$.Compute(b$.Duration);});return{Compute:function(cd){return cd>=cb?cc.f():ca(cd);},Duration:b_};};bL.$cctor=function(){bL.$cctor=a.ignore;bL.BatchUpdatesEnabled=true;};bM.concat=function(b_){var b$,ca;b$=[];for(var cb in b_)b$.push.apply(b$,b_[cb]);return b$;};bN.$cctor=function(){var b_;bN.$cctor=a.ignore;bN.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bN.rtagName=new a.RegExp("<([\\w:]+)");bN.rhtml=new a.RegExp("<|&#?\\w+;");bN.wrapMap=(b_=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:b_,tbody:b_,tfoot:b_,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bN.defaultWrap=[0,"",""];};bO.$cctor=function(){bO.$cctor=a.ignore;bO.CubicInOut=bT.Custom(function(b_){var b$;b$=b_*b_;return 3*b$-2*(b$*b_);});bO.UseAnimations=true;};bP.Append=function(b_,b$){return b_.$==0?b$:b$.$==0?b_:{$:2,$0:b_,$1:b$};};bP.ToArray=function(b_){var b$;function ca(cb){var cc,cd;while(true)if(cb.$==1)return b$.push(cb.$0);else if(cb.$==2){cc=cb.$1;cd=cb.$0;ca(cd);cb=cc;}else return cb.$==3?p.iter(function(ce){b$.push(ce);},cb.$0):null;}b$=[];ca(b_);return b$.slice(0);};bP.Concat=function(b_){var b$;b$=bE.ofSeqNonCopying(b_);return bE.TreeReduce(bP.Empty(),bP.Append,b$);};bP.Empty=function(){b2.$cctor();return b2.Empty;};bQ=g.DynamicAttrNode=b6.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(b_){return bn.get_Empty();},NGetEnterAnim:function(b_){return bn.get_Empty();},NGetChangeAnim:function(b_){return bn.get_Empty();},NSync:function(b_){if(this.dirty){(this.push(b_))(this.value);this.dirty=false;}}},f,bQ);bQ.New=b6.Ctor(function(b_,b$){var ca;ca=this;f.New.call(this);this.push=b$;this.value=void 0;this.dirty=false;this.updates=_2.Map(function(cb){ca.value=cb;ca.dirty=true;},b_);},bQ);bR=b.KeyNotFoundException=b6.Class({},_5,bR);bR.New=b6.Ctor(function(){bR.New$1.call(this,"The given key was not present in the dictionary.");},bR);bR.New$1=b6.Ctor(function(b_){this.message=b_;Q.setPrototypeOf(this,bR.prototype);},bR);bS.$cctor=function(){var b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl;bS.$cctor=a.ignore;bS.EmptyAttr=null;bS.BoolCheckedApply=function(cm){function cn(co,cp){return cp!=null&&cp.$==1?void(co.checked=cp.$0):null;}return[function(co){co.addEventListener("change",function(){return cm.Get()!=co.checked?cm.Set(co.checked):null;});},function(co){return function(cp){return cn(co,cp);};},_2.Map(function(co){return{$:1,$0:co};},cm.get_View())];};bS.StringSet=function(cm){return function(cn){cm.value=cn;};};bS.StringGet=function(cm){return{$:1,$0:cm.value};};bS.StringApply=(b_=bV.StringGet(),(b$=bV.StringSet(),function(cm){return bV.ApplyValue(b_,b$,cm);}));bS.DateTimeSetUnchecked=function(cm){return function(cn){cm.value=(new b9(cn)).toLocaleString();};};bS.DateTimeGetUnchecked=function(cm){var cn,co,cp,cq;cn=cm.value;return bW.isBlank(cn)?{$:1,$0:-8640000000000000}:(co=(cp=0,[(cq=b0.TryParse(cn),cq!=null&&cq.$==1&&(cp=cq.$0,true)),cp]),co[0]?{$:1,$0:co[1]}:null);};bS.DateTimeApplyUnchecked=(ca=bV.DateTimeGetUnchecked(),(cb=bV.DateTimeSetUnchecked(),function(cm){return bV.ApplyValue(ca,cb,cm);}));bS.FileSetUnchecked=function(){return function(){return null;};};bS.FileGetUnchecked=function(cm){var cn;cn=cm.files;return{$:1,$0:p.ofSeq(U.delay(function(){return U.map(function(co){return cn.item(co);},j.range(0,cn.length-1));}))};};bS.FileApplyUnchecked=(cc=bV.FileGetUnchecked(),(cd=bV.FileSetUnchecked(),function(cm){return bV.FileApplyValue(cc,cd,cm);}));bS.IntSetUnchecked=function(cm){return function(cn){cm.value=a.String(cn);};};bS.IntGetUnchecked=function(cm){var cn,co;cn=cm.value;return bW.isBlank(cn)?{$:1,$0:0}:(co=+cn,co!==co>>0?null:{$:1,$0:co});};bS.IntApplyUnchecked=(ce=bV.IntGetUnchecked(),(cf=bV.IntSetUnchecked(),function(cm){return bV.ApplyValue(ce,cf,cm);}));bS.IntSetChecked=function(cm){return function(cn){var co;co=cn.get_Input();return cm.value!=co?void(cm.value=co):null;};};bS.IntGetChecked=function(cm){var cn,co,cp;cn=cm.value;return{$:1,$0:bW.isBlank(cn)?(cm.checkValidity?cm.checkValidity():true)?new bX({$:2,$0:cn}):new bX({$:1,$0:cn}):(co=(cp=0,[_3.TryParseInt32(cn,{get:function(){return cp;},set:function(cq){cp=cq;}}),cp]),co[0]?new bX({$:0,$0:co[1],$1:cn}):new bX({$:1,$0:cn}))};};bS.IntApplyChecked=(cg=bV.IntGetChecked(),(ch=bV.IntSetChecked(),function(cm){return bV.ApplyValue(cg,ch,cm);}));bS.FloatSetUnchecked=function(cm){return function(cn){cm.value=a.String(cn);};};bS.FloatGetUnchecked=function(cm){var cn,co;cn=cm.value;return bW.isBlank(cn)?{$:1,$0:0}:(co=+cn,a.isNaN(co)?null:{$:1,$0:co});};bS.FloatApplyUnchecked=(ci=bV.FloatGetUnchecked(),(cj=bV.FloatSetUnchecked(),function(cm){return bV.ApplyValue(ci,cj,cm);}));bS.FloatSetChecked=function(cm){return function(cn){var co;co=cn.get_Input();return cm.value!=co?void(cm.value=co):null;};};bS.FloatGetChecked=function(cm){var cn,co;cn=cm.value;return{$:1,$0:bW.isBlank(cn)?(cm.checkValidity?cm.checkValidity():true)?new bX({$:2,$0:cn}):new bX({$:1,$0:cn}):(co=+cn,a.isNaN(co)?new bX({$:1,$0:cn}):new bX({$:0,$0:co,$1:cn}))};};bS.FloatApplyChecked=(ck=bV.FloatGetChecked(),(cl=bV.FloatSetChecked(),function(cm){return bV.ApplyValue(ck,cl,cm);}));};bT=g.Easing=b6.Class({},f,bT);bT.Custom=function(b_){return new bT.New(b_);};bT.New=b6.Ctor(function(b_){f.New.call(this);this.transformTime=b_;},bT);bU.Filter=function(b_,b$){return new T.New$2(p.filter(b_,bU.ToArray(b$)));};bU.Except=function(b_,b$){var ca;ca=new T.New$2(bU.ToArray(b$));ca.ExceptWith(bU.ToArray(b_));return ca;};bU.ToArray=function(b_){var b$;b$=p.create(b_.Count(),void 0);b_.CopyTo(b$,0);return b$;};bU.Intersect=function(b_,b$){var ca;ca=new T.New$2(bU.ToArray(b_));ca.IntersectWith(bU.ToArray(b$));return ca;};bB.head=function(b_){return b_.$==1?b_.$0:bB.listEmpty();};bB.tail=function(b_){return b_.$==1?b_.$1:bB.listEmpty();};bB.listEmpty=function(){return j.FailWith("The input list was empty.");};bV.ApplyValue=function(b_,b$,ca){var cb;function cc(cd,ce){return ce==null?null:cd(ce.$0);}cb=null;return[function(cd){function ce(){ca.UpdateMaybe(function(cf){var cg;cb=b_(cd);return cb!=null&&cb.$==1&&(!s.Equals(cb.$0,cf)&&(cg=[cb,cb.$0],true))?cg[0]:null;});}cd.addEventListener("change",ce);cd.addEventListener("input",ce);cd.addEventListener("keypress",ce);},function(cd){var ce;ce=b$(cd);return function(cf){return cc(ce,cf);};},_2.Map(function(cd){var ce;return cb!=null&&cb.$==1&&(s.Equals(cb.$0,cd)&&(ce=cb.$0,true))?null:{$:1,$0:cd};},ca.get_View())];};bV.StringSet=function(){bS.$cctor();return bS.StringSet;};bV.StringGet=function(){bS.$cctor();return bS.StringGet;};bV.DateTimeSetUnchecked=function(){bS.$cctor();return bS.DateTimeSetUnchecked;};bV.DateTimeGetUnchecked=function(){bS.$cctor();return bS.DateTimeGetUnchecked;};bV.FileApplyValue=function(b_,b$,ca){var cb;function cc(cd,ce){return ce==null?null:cd(ce.$0);}cb=null;return[function(cd){cd.addEventListener("change",function(){ca.UpdateMaybe(function(ce){var cf;cb=b_(cd);return cb!=null&&cb.$==1&&(cb.$0!==ce&&(cf=[cb,cb.$0],true))?cf[0]:null;});});},function(cd){var ce;ce=b$(cd);return function(cf){return cc(ce,cf);};},_2.Map(function(cd){var ce;return cb!=null&&cb.$==1&&(s.Equals(cb.$0,cd)&&(ce=cb.$0,true))?null:{$:1,$0:cd};},ca.get_View())];};bV.FileSetUnchecked=function(){bS.$cctor();return bS.FileSetUnchecked;};bV.FileGetUnchecked=function(){bS.$cctor();return bS.FileGetUnchecked;};bV.IntSetUnchecked=function(){bS.$cctor();return bS.IntSetUnchecked;};bV.IntGetUnchecked=function(){bS.$cctor();return bS.IntGetUnchecked;};bV.IntSetChecked=function(){bS.$cctor();return bS.IntSetChecked;};bV.IntGetChecked=function(){bS.$cctor();return bS.IntGetChecked;};bV.FloatSetUnchecked=function(){bS.$cctor();return bS.FloatSetUnchecked;};bV.FloatGetUnchecked=function(){bS.$cctor();return bS.FloatGetUnchecked;};bV.FloatSetChecked=function(){bS.$cctor();return bS.FloatSetChecked;};bV.FloatGetChecked=function(){bS.$cctor();return bS.FloatGetChecked;};bV.StringApply=function(){bS.$cctor();return bS.StringApply;};bV.FloatApplyUnchecked=function(){bS.$cctor();return bS.FloatApplyUnchecked;};bV.BoolCheckedApply=function(){bS.$cctor();return bS.BoolCheckedApply;};bV.DateTimeApplyUnchecked=function(){bS.$cctor();return bS.DateTimeApplyUnchecked;};bV.FileApplyUnchecked=function(){bS.$cctor();return bS.FileApplyUnchecked;};bW.isBlank=function(b_){return bD.forall(bZ.IsWhiteSpace,b_);};bX=g.CheckedInput=b6.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,bX);bY.Children=function(b_,b$){var ca,cb,cc;if(b$!=null&&b$.$==1){cc=[];ca=b$.$0[0].nextSibling;while(ca!==b$.$0[1]){cc.push(ca);ca=ca.nextSibling;}return{$:0,$0:cc};}else return{$:0,$0:p.init(b_.childNodes.length,(cb=b_.childNodes,function(cd){return cb[cd];}))};};bY.Except=function(b_,b$){var ca;ca=b_.$0;return{$:0,$0:p.filter(function(cb){return p.forall(function(cc){return!(cb===cc);},ca);},b$.$0)};};bY.Iter=function(b_,b$){p.iter(b_,b$.$0);};bY.DocChildren=function(b_){var b$;function ca(cb){var cc,cd,ce,cf;while(true){if(cb!=null&&cb.$==2){cd=cb.$0;cb=cd.Current;}else if(cb!=null&&cb.$==1)return b$.push(cb.$0.El);else if(cb==null)return null;else if(cb!=null&&cb.$==5)return b$.push(cb.$0);else if(cb!=null&&cb.$==4)return b$.push(cb.$0.Text);else if(cb!=null&&cb.$==6){cc=cb.$0.Els;return(function(cg){return function(ch){p.iter(cg,ch);};}(function(cg){if(cg==null||cg.constructor===Q)ca(cg);else b$.push(cg);}))(cc);}else{ce=cb.$1;cf=cb.$0;ca(cf);cb=ce;}}}b$=[];ca(b_.Children);return{$:0,$0:bE.ofSeqNonCopying(b$)};};bZ.IsWhiteSpace=function(b_){return b_.match(new a.RegExp("\\s"))!==null;};b0.TryParse=function(b_){var b$;b$=b9.parse(b_);return a.isNaN(b$)?null:{$:1,$0:b$};};_3.TryParse=function(b_,b$,ca,cb){var cc,cd;cc=+b_;cd=cc===cc-cc%1&&cc>=b$&&cc<=ca;if(cd)cb.set(cc);return cd;};b1.Create=function(b_){return b5.New(false,b_,b1.forceLazy);};b1.forceLazy=function(){var b_;b_=this.v();this.c=true;this.v=b_;this.f=b1.cachedLazy;return b_;};b1.cachedLazy=function(){return this.v;};b2.$cctor=function(){b2.$cctor=a.ignore;b2.Empty={$:0};};b3.Clear=function(b_){b_.splice(0,p.length(b_));};b5.New=function(b_,b$,ca){return{c:b_,v:b$,f:ca};};b6.OnLoad(function(){e.Main();});}(self));


if (typeof WebSharper !=='undefined') {
  WebSharper.Runtime.ScriptBasePath = '/Content/';
  WebSharper.Runtime.Start();
}
